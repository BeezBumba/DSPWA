(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var ie,y,ot,q,Le,it,ke,We,Ne,xe,at,oe={},lt=[],Dt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,he=Array.isArray;function H(e,t){for(var n in t)e[n]=t[n];return e}function st(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function R(e,t,n){var r,i,a,l={};for(a in t)a=="key"?r=t[a]:a=="ref"?i=t[a]:l[a]=t[a];if(arguments.length>2&&(l.children=arguments.length>3?ie.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)l[a]===void 0&&(l[a]=e.defaultProps[a]);return ne(e,l,r,i,null)}function ne(e,t,n,r,i){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++ot,__i:-1,__u:0};return i==null&&y.vnode!=null&&y.vnode(a),a}function Lt(){return{current:null}}function O(e){return e.children}function F(e,t){this.props=e,this.context=t}function Z(e,t){if(t==null)return e.__?Z(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Z(e):null}function ct(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ct(e)}}function Me(e){(!e.__d&&(e.__d=!0)&&q.push(e)&&!de.__r++||Le!==y.debounceRendering)&&((Le=y.debounceRendering)||it)(de)}function de(){var e,t,n,r,i,a,l,s;for(q.sort(ke);e=q.shift();)e.__d&&(t=q.length,r=void 0,a=(i=(n=e).__v).__e,l=[],s=[],n.__P&&((r=H({},i)).__v=i.__v+1,y.vnode&&y.vnode(r),Ie(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[a]:null,l,a??Z(i),!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,_t(l,r,s),r.__e!=a&&ct(r)),q.length>t&&q.sort(ke));de.__r=0}function ut(e,t,n,r,i,a,l,s,c,d,h){var u,p,f,g,N,x=r&&r.__k||lt,v=t.length;for(n.__d=c,At(n,t,x),c=n.__d,u=0;u<v;u++)(f=n.__k[u])!=null&&(p=f.__i===-1?oe:x[f.__i]||oe,f.__i=u,Ie(e,f,p,i,a,l,s,c,d,h),g=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Te(p.ref,null,f),h.push(f.ref,f.__c||g,f)),N==null&&g!=null&&(N=g),65536&f.__u||p.__k===f.__k?c=dt(f,c,e):typeof f.type=="function"&&f.__d!==void 0?c=f.__d:g&&(c=g.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=c,n.__e=N}function At(e,t,n){var r,i,a,l,s,c=t.length,d=n.length,h=d,u=0;for(e.__k=[],r=0;r<c;r++)(i=t[r])!=null&&typeof i!="boolean"&&typeof i!="function"?(l=r+u,(i=e.__k[r]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?ne(null,i,null,null,null):he(i)?ne(O,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?ne(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,a=null,(s=i.__i=Ft(i,n,l,h))!==-1&&(h--,(a=n[s])&&(a.__u|=131072)),a==null||a.__v===null?(s==-1&&u--,typeof i.type!="function"&&(i.__u|=65536)):s!==l&&(s==l-1?u--:s==l+1?u++:(s>l?u--:u++,i.__u|=65536))):i=e.__k[r]=null;if(h)for(r=0;r<d;r++)(a=n[r])!=null&&!(131072&a.__u)&&(a.__e==e.__d&&(e.__d=Z(a)),pt(a,a))}function dt(e,t,n){var r,i;if(typeof e.type=="function"){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=dt(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Z(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function j(e,t){return t=t||[],e==null||typeof e=="boolean"||(he(e)?e.some(function(n){j(n,t)}):t.push(e)),t}function Ft(e,t,n,r){var i=e.key,a=e.type,l=n-1,s=n+1,c=t[n];if(c===null||c&&i==c.key&&a===c.type&&!(131072&c.__u))return n;if(r>(c!=null&&!(131072&c.__u)?1:0))for(;l>=0||s<t.length;){if(l>=0){if((c=t[l])&&!(131072&c.__u)&&i==c.key&&a===c.type)return l;l--}if(s<t.length){if((c=t[s])&&!(131072&c.__u)&&i==c.key&&a===c.type)return s;s++}}return-1}function Ae(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Dt.test(t)?n:n+"px"}function le(e,t,n,r,i){var a;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Ae(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Ae(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")a=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=We,e.addEventListener(t,a?xe:Ne,a)):e.removeEventListener(t,a?xe:Ne,a);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Fe(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=We++;else if(t.t<n.u)return;return n(y.event?y.event(t):t)}}}function Ie(e,t,n,r,i,a,l,s,c,d){var h,u,p,f,g,N,x,v,w,D,T,U,L,z,$,G,_=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),a=[s=t.__e=n.__e]),(h=y.__b)&&h(t);e:if(typeof _=="function")try{if(v=t.props,w="prototype"in _&&_.prototype.render,D=(h=_.contextType)&&r[h.__c],T=h?D?D.props.value:h.__:r,n.__c?x=(u=t.__c=n.__c).__=u.__E:(w?t.__c=u=new _(v,T):(t.__c=u=new F(v,T),u.constructor=_,u.render=Ht),D&&D.sub(u),u.props=v,u.state||(u.state={}),u.context=T,u.__n=r,p=u.__d=!0,u.__h=[],u._sb=[]),w&&u.__s==null&&(u.__s=u.state),w&&_.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=H({},u.__s)),H(u.__s,_.getDerivedStateFromProps(v,u.__s))),f=u.props,g=u.state,u.__v=t,p)w&&_.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),w&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(w&&_.getDerivedStateFromProps==null&&v!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(v,T),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(v,u.__s,T)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(u.props=v,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(m){m&&(m.__=t)}),U=0;U<u._sb.length;U++)u.__h.push(u._sb[U]);u._sb=[],u.__h.length&&l.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(v,u.__s,T),w&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,g,N)})}if(u.context=T,u.props=v,u.__P=e,u.__e=!1,L=y.__r,z=0,w){for(u.state=u.__s,u.__d=!1,L&&L(t),h=u.render(u.props,u.state,u.context),$=0;$<u._sb.length;$++)u.__h.push(u._sb[$]);u._sb=[]}else do u.__d=!1,L&&L(t),h=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++z<25);u.state=u.__s,u.getChildContext!=null&&(r=H(H({},r),u.getChildContext())),w&&!p&&u.getSnapshotBeforeUpdate!=null&&(N=u.getSnapshotBeforeUpdate(f,g)),ut(e,he(G=h!=null&&h.type===O&&h.key==null?h.props.children:h)?G:[G],t,n,r,i,a,l,s,c,d),u.base=t.__e,t.__u&=-161,u.__h.length&&l.push(u),x&&(u.__E=u.__=null)}catch(m){if(t.__v=null,c||a!=null){for(t.__u|=c?160:128;s&&s.nodeType===8&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else t.__e=n.__e,t.__k=n.__k;y.__e(m,t,n)}else a==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=$t(n.__e,t,n,r,i,a,l,c,d);(h=y.diffed)&&h(t)}function _t(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)Te(n[r],n[++r],n[++r]);y.__c&&y.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(a){a.call(i)})}catch(a){y.__e(a,i.__v)}})}function $t(e,t,n,r,i,a,l,s,c){var d,h,u,p,f,g,N,x=n.props,v=t.props,w=t.type;if(w==="svg"?i="http://www.w3.org/2000/svg":w==="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),a!=null){for(d=0;d<a.length;d++)if((f=a[d])&&"setAttribute"in f==!!w&&(w?f.localName===w:f.nodeType===3)){e=f,a[d]=null;break}}if(e==null){if(w===null)return document.createTextNode(v);e=document.createElementNS(i,w,v.is&&v),s&&(y.__m&&y.__m(t,a),s=!1),a=null}if(w===null)x===v||s&&e.data===v||(e.data=v);else{if(a=a&&ie.call(e.childNodes),x=n.props||oe,!s&&a!=null)for(x={},d=0;d<e.attributes.length;d++)x[(f=e.attributes[d]).name]=f.value;for(d in x)if(f=x[d],d!="children"){if(d=="dangerouslySetInnerHTML")u=f;else if(!(d in v)){if(d=="value"&&"defaultValue"in v||d=="checked"&&"defaultChecked"in v)continue;le(e,d,null,f,i)}}for(d in v)f=v[d],d=="children"?p=f:d=="dangerouslySetInnerHTML"?h=f:d=="value"?g=f:d=="checked"?N=f:s&&typeof f!="function"||x[d]===f||le(e,d,f,x[d],i);if(h)s||u&&(h.__html===u.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(u&&(e.innerHTML=""),ut(e,he(p)?p:[p],t,n,r,w==="foreignObject"?"http://www.w3.org/1999/xhtml":i,a,l,a?a[0]:n.__k&&Z(n,0),s,c),a!=null)for(d=a.length;d--;)st(a[d]);s||(d="value",w==="progress"&&g==null?e.removeAttribute("value"):g!==void 0&&(g!==e[d]||w==="progress"&&!g||w==="option"&&g!==x[d])&&le(e,d,g,x[d],i),d="checked",N!==void 0&&N!==e[d]&&le(e,d,N,x[d],i))}return e}function Te(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(i){y.__e(i,n)}}function pt(e,t,n){var r,i;if(y.unmount&&y.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Te(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(a){y.__e(a,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&pt(r[i],t,n||typeof e.type!="function");n||st(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Ht(e,t,n){return this.constructor(e,n)}function X(e,t,n){var r,i,a,l;y.__&&y.__(e,t),i=(r=typeof n=="function")?null:n&&n.__k||t.__k,a=[],l=[],Ie(t,e=(!r&&n||t).__k=R(O,null,[e]),i||oe,oe,t.namespaceURI,!r&&n?[n]:i?null:t.firstChild?ie.call(t.childNodes):null,a,!r&&n?n:i?i.__e:t.firstChild,r,l),_t(a,e,l)}function ht(e,t){X(e,t,ht)}function jt(e,t,n){var r,i,a,l,s=H({},e.props);for(a in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)a=="key"?r=t[a]:a=="ref"?i=t[a]:s[a]=t[a]===void 0&&l!==void 0?l[a]:t[a];return arguments.length>2&&(s.children=arguments.length>3?ie.call(arguments,2):n),ne(e.type,s,r||e.key,i||e.ref,null)}function Rt(e,t){var n={__c:t="__cC"+at++,__:e,Consumer:function(r,i){return r.children(i)},Provider:function(r){var i,a;return this.getChildContext||(i=new Set,(a={})[t]=this,this.getChildContext=function(){return a},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&i.forEach(function(s){s.__e=!0,Me(s)})},this.sub=function(l){i.add(l);var s=l.componentWillUnmount;l.componentWillUnmount=function(){i&&i.delete(l),s&&s.call(l)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}ie=lt.slice,y={__e:function(e,t,n,r){for(var i,a,l;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&a.getDerivedStateFromError!=null&&(i.setState(a.getDerivedStateFromError(e)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,r||{}),l=i.__d),l)return i.__E=i}catch(s){e=s}throw e}},ot=0,F.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=H({},this.state),typeof e=="function"&&(e=e(H({},n),this.props)),e&&H(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Me(this))},F.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Me(this))},F.prototype.render=O,q=[],it=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ke=function(e,t){return e.__v.__b-t.__v.__b},de.__r=0,We=0,Ne=Fe(!1),xe=Fe(!0),at=0;var Ut=0;function o(e,t,n,r,i,a){t||(t={});var l,s,c=t;"ref"in t&&(l=t.ref,delete t.ref);var d={type:e,props:c,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Ut,__i:-1,__u:0,__source:i,__self:a};if(typeof e=="function"&&(l=e.defaultProps))for(s in l)c[s]===void 0&&(c[s]=l[s]);return y.vnode&&y.vnode(d),d}var V,M,be,$e,Q=0,mt=[],C=y,He=C.__b,je=C.__r,Re=C.diffed,Ue=C.__c,ze=C.unmount,Ve=C.__;function ee(e,t){C.__h&&C.__h(M,e,Q||t),Q=0;var n=M.__H||(M.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function S(e){return Q=1,Be(yt,e)}function Be(e,t,n){var r=ee(V++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):yt(void 0,t),function(s){var c=r.__N?r.__N[0]:r.__[0],d=r.t(c,s);c!==d&&(r.__N=[d,r.__[1]],r.__c.setState({}))}],r.__c=M,!M.u)){var i=function(s,c,d){if(!r.__c.__H)return!0;var h=r.__c.__H.__.filter(function(p){return!!p.__c});if(h.every(function(p){return!p.__N}))return!a||a.call(this,s,c,d);var u=!1;return h.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(u=!0)}}),!(!u&&r.__c.props===s)&&(!a||a.call(this,s,c,d))};M.u=!0;var a=M.shouldComponentUpdate,l=M.componentWillUpdate;M.componentWillUpdate=function(s,c,d){if(this.__e){var h=a;a=void 0,i(s,c,d),a=h}l&&l.call(this,s,c,d)},M.shouldComponentUpdate=i}return r.__N||r.__}function P(e,t){var n=ee(V++,3);!C.__s&&Oe(n.__H,t)&&(n.__=e,n.i=t,M.__H.__h.push(n))}function ae(e,t){var n=ee(V++,4);!C.__s&&Oe(n.__H,t)&&(n.__=e,n.i=t,M.__h.push(n))}function me(e){return Q=5,fe(function(){return{current:e}},[])}function ft(e,t,n){Q=6,ae(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function fe(e,t){var n=ee(V++,7);return Oe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function re(e,t){return Q=8,fe(function(){return e},t)}function gt(e){var t=M.context[e.__c],n=ee(V++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(M)),t.props.value):e.__}function vt(e,t){C.useDebugValue&&C.useDebugValue(t?t(e):e)}function bt(){var e=ee(V++,11);if(!e.__){for(var t=M.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function zt(){for(var e;e=mt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ce),e.__H.__h.forEach(Ce),e.__H.__h=[]}catch(t){e.__H.__h=[],C.__e(t,e.__v)}}C.__b=function(e){M=null,He&&He(e)},C.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ve&&Ve(e,t)},C.__r=function(e){je&&je(e),V=0;var t=(M=e.__c).__H;t&&(be===M?(t.__h=[],M.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(ce),t.__h.forEach(Ce),t.__h=[],V=0)),be=M},C.diffed=function(e){Re&&Re(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(mt.push(t)!==1&&$e===C.requestAnimationFrame||(($e=C.requestAnimationFrame)||Vt)(zt)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),be=M=null},C.__c=function(e,t){t.some(function(n){try{n.__h.forEach(ce),n.__h=n.__h.filter(function(r){return!r.__||Ce(r)})}catch(r){t.some(function(i){i.__h&&(i.__h=[])}),t=[],C.__e(r,n.__v)}}),Ue&&Ue(e,t)},C.unmount=function(e){ze&&ze(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{ce(r)}catch(i){t=i}}),n.__H=void 0,t&&C.__e(t,n.__v))};var Ge=typeof requestAnimationFrame=="function";function Vt(e){var t,n=function(){clearTimeout(r),Ge&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Ge&&(t=requestAnimationFrame(n))}function ce(e){var t=M,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),M=t}function Ce(e){var t=M;e.__c=e.__(),M=t}function Oe(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function yt(e,t){return typeof t=="function"?t(e):t}function Ee(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function Pe(e,t){this.props=e,this.context=t}function Gt(e,t){function n(i){var a=this.props.ref,l=a==i.ref;return!l&&a&&(a.call?a(null):a.current=null),t?!t(this.props,i)||!l:Ee(this.props,i)}function r(i){return this.shouldComponentUpdate=n,R(e,i)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(Pe.prototype=new F).isPureReactComponent=!0,Pe.prototype.shouldComponentUpdate=function(e,t){return Ee(this.props,e)||Ee(this.state,t)};var Ke=y.__b;y.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ke&&Ke(e)};var Kt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function qt(e){function t(n){if(!("ref"in n))return e(n,null);var r=n.ref;delete n.ref;var i=e(n,r);return n.ref=r,i}return t.$$typeof=Kt,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var qe=function(e,t){return e==null?null:j(j(e).map(t))},Jt={map:qe,forEach:qe,count:function(e){return e?j(e).length:0},only:function(e){var t=j(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:j},Yt=y.__e;y.__e=function(e,t,n,r){if(e.then){for(var i,a=t;a=a.__;)if((i=a.__c)&&i.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t)}Yt(e,t,n,r)};var Je=y.unmount;function wt(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=function(r,i){for(var a in i)r[a]=i[a];return r}({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return wt(r,t,n)})),e}function St(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return St(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function ue(){this.__u=0,this.t=null,this.__b=null}function kt(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Zt(e){var t,n,r;function i(a){if(t||(t=e()).then(function(l){n=l.default||l},function(l){r=l}),r)throw r;if(!n)throw t;return R(n,a)}return i.displayName="Lazy",i.__f=!0,i}function te(){this.u=null,this.o=null}y.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Je&&Je(e)},(ue.prototype=new F).__c=function(e,t){var n=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var i=kt(r.__v),a=!1,l=function(){a||(a=!0,n.__R=null,i?i(s):s())};n.__R=l;var s=function(){if(!--r.__u){if(r.state.__a){var c=r.state.__a;r.__v.__k[0]=St(c,c.__c.__P,c.__c.__O)}var d;for(r.setState({__a:r.__b=null});d=r.t.pop();)d.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(l,l)},ue.prototype.componentWillUnmount=function(){this.t=[]},ue.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=wt(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&R(O,null,e.fallback);return i&&(i.__u&=-33),[R(O,null,t.__a?null:e.children),i]};var Ye=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Xt(e){return this.getChildContext=function(){return e.context},e.children}function Qt(e){var t=this,n=e.i;t.componentWillUnmount=function(){X(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(r){this.childNodes.push(r),t.i.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),t.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.i.removeChild(r)}}),X(R(Xt,{context:t.context},e.__v),t.l)}function en(e,t){var n=R(Qt,{__v:e,i:t});return n.containerInfo=t,n}(te.prototype=new F).__a=function(e){var t=this,n=kt(t.__v),r=t.o.get(e);return r[0]++,function(i){var a=function(){t.props.revealOrder?(r.push(i),Ye(t,e,r)):i()};n?n(a):a()}},te.prototype.render=function(e){this.u=null,this.o=new Map;var t=j(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},te.prototype.componentDidUpdate=te.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){Ye(e,n,t)})};var Nt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,tn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,nn=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,rn=/[A-Z0-9]/g,on=typeof document<"u",an=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function ln(e,t,n){return t.__k==null&&(t.textContent=""),X(e,t),typeof n=="function"&&n(),e?e.__c:null}function sn(e,t,n){return ht(e,t),typeof n=="function"&&n(),e?e.__c:null}F.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(F.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Ze=y.event;function cn(){}function un(){return this.cancelBubble}function dn(){return this.defaultPrevented}y.event=function(e){return Ze&&(e=Ze(e)),e.persist=cn,e.isPropagationStopped=un,e.isDefaultPrevented=dn,e.nativeEvent=e};var De,_n={enumerable:!1,configurable:!0,get:function(){return this.class}},Xe=y.vnode;y.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,i={},a=r.indexOf("-")===-1;for(var l in n){var s=n[l];if(!(l==="value"&&"defaultValue"in n&&s==null||on&&l==="children"&&r==="noscript"||l==="class"||l==="className")){var c=l.toLowerCase();l==="defaultValue"&&"value"in n&&n.value==null?l="value":l==="download"&&s===!0?s="":c==="translate"&&s==="no"?s=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?l="ondblclick":c!=="onchange"||r!=="input"&&r!=="textarea"||an(n.type)?c==="onfocus"?l="onfocusin":c==="onblur"?l="onfocusout":nn.test(l)&&(l=c):c=l="oninput":a&&tn.test(l)?l=l.replace(rn,"-$&").toLowerCase():s===null&&(s=void 0),c==="oninput"&&i[l=c]&&(l="oninputCapture"),i[l]=s}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=j(n.children).forEach(function(d){d.props.selected=i.value.indexOf(d.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=j(n.children).forEach(function(d){d.props.selected=i.multiple?i.defaultValue.indexOf(d.props.value)!=-1:i.defaultValue==d.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",_n)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),t.props=i}(e),e.$$typeof=Nt,Xe&&Xe(e)};var Qe=y.__r;y.__r=function(e){Qe&&Qe(e),De=e.__c};var et=y.diffed;y.diffed=function(e){et&&et(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),De=null};var pn={ReactCurrentDispatcher:{current:{readContext:function(e){return De.__n[e.__c].props.value},useCallback:re,useContext:gt,useDebugValue:vt,useDeferredValue:Mt,useEffect:P,useId:bt,useImperativeHandle:ft,useInsertionEffect:Et,useLayoutEffect:ae,useMemo:fe,useReducer:Be,useRef:me,useState:S,useSyncExternalStore:Pt,useTransition:Ct}}};function hn(e){return R.bind(null,e)}function ge(e){return!!e&&e.$$typeof===Nt}function mn(e){return ge(e)&&e.type===O}function fn(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function gn(e){return ge(e)?jt.apply(null,arguments):e}function vn(e){return!!e.__k&&(X(null,e),!0)}function bn(e){return e&&(e.base||e.nodeType===1&&e)||null}var yn=function(e,t){return e(t)},wn=function(e,t){return e(t)},Sn=O;function xt(e){e()}function Mt(e){return e}function Ct(){return[!1,xt]}var Et=ae,kn=ge;function Pt(e,t){var n=t(),r=S({h:{__:n,v:t}}),i=r[0].h,a=r[1];return ae(function(){i.__=n,i.v=t,ye(i)&&a({h:i})},[e,n,t]),P(function(){return ye(i)&&a({h:i}),e(function(){ye(i)&&a({h:i})})},[e]),n}function ye(e){var t,n,r=e.v,i=e.__;try{var a=r();return!((t=i)===(n=a)&&(t!==0||1/t==1/n)||t!=t&&n!=n)}catch{return!0}}var J={useState:S,useId:bt,useReducer:Be,useEffect:P,useLayoutEffect:ae,useInsertionEffect:Et,useTransition:Ct,useDeferredValue:Mt,useSyncExternalStore:Pt,startTransition:xt,useRef:me,useImperativeHandle:ft,useMemo:fe,useCallback:re,useContext:gt,useDebugValue:vt,version:"18.3.1",Children:Jt,render:ln,hydrate:sn,unmountComponentAtNode:vn,createPortal:en,createElement:R,createContext:Rt,createFactory:hn,cloneElement:gn,createRef:Lt,Fragment:O,isValidElement:ge,isElement:kn,isFragment:mn,isMemo:fn,findDOMNode:bn,Component:F,PureComponent:Pe,memo:Gt,forwardRef:qt,flushSync:wn,unstable_batchedUpdates:yn,StrictMode:Sn,Suspense:ue,SuspenseList:te,lazy:Zt,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:pn},Wt={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tt=J.createContext&&J.createContext(Wt),Nn=["attr","size","title"];function xn(e,t){if(e==null)return{};var n=Mn(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Mn(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nt(Object(n),!0).forEach(function(r){Cn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cn(e,t,n){return t=En(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function En(e){var t=Pn(e,"string");return typeof t=="symbol"?t:t+""}function Pn(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function It(e){return e&&e.map((t,n)=>J.createElement(t.tag,pe({key:n},t.attr),It(t.child)))}function A(e){return t=>J.createElement(Wn,_e({attr:pe({},e.attr)},t),It(e.child))}function Wn(e){var t=n=>{var{attr:r,size:i,title:a}=e,l=xn(e,Nn),s=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),J.createElement("svg",_e({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:c,style:pe(pe({color:e.color||n.color},n.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&J.createElement("title",null,a),e.children)};return tt!==void 0?J.createElement(tt.Consumer,null,n=>t(n)):t(Wt)}function In(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m6 17 5-5-5-5"},child:[]},{tag:"path",attr:{d:"m13 17 5-5-5-5"},child:[]}]})(e)}function Tn(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"20",height:"14",x:"2",y:"3",rx:"2"},child:[]},{tag:"line",attr:{x1:"8",x2:"16",y1:"21",y2:"21"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"17",y2:"21"},child:[]}]})(e)}function Bn(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"4",height:"16",x:"6",y:"4"},child:[]},{tag:"rect",attr:{width:"4",height:"16",x:"14",y:"4"},child:[]}]})(e)}function Tt(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function Bt(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"3",y2:"15"},child:[]}]})(e)}function On(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function Dn(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(e)}var W=(e=>(e.Natural="natural",e.Horizontal="horizontal",e.HorizontalSwap="horizontal-swap",e.TopOnly="top-only",e.BottomOnly="bottom-only",e.TopEmphasis="top-emphasis",e.BottomEmphasis="bottom-emphasis",e.SingleScreen="single-screen",e))(W||{});const we={layout:"natural",screenGap:0,swapScreens:!1,integerScale:!1,screenFilter:!0,singleScreenToggleKey:"Tab",currentSingleScreen:"top",theme:"cupcake"};function ve(){const e=window.localStorage.getItem("displaySettings");if(e)try{return{...we,...JSON.parse(e)}}catch{return we}return we}function Ot(e){window.localStorage.setItem("displaySettings",JSON.stringify(e)),document.documentElement.setAttribute("data-theme",e.theme),window.dispatchEvent(new CustomEvent("displaySettingsChanged",{detail:e}))}function Ln(){const e=ve();(e.layout==="single-screen"||e.layout==="top-only"||e.layout==="bottom-only")&&(e.currentSingleScreen=e.currentSingleScreen==="top"?"bottom":"top",Ot(e))}function An(){const[e,t]=S(ve()),[n,r]=S(!1),i=g=>{const N={...e,...g};t(N),Ot(N)},a=g=>{const N=g.currentTarget.value;i(N==="single-screen"?{layout:N,currentSingleScreen:"top"}:{layout:N})},l=g=>{i({screenGap:parseInt(g.currentTarget.value)||0})},s=g=>{i({swapScreens:g.currentTarget.checked})},c=g=>{i({integerScale:g.currentTarget.checked})},d=g=>{i({screenFilter:g.currentTarget.checked})},h=g=>{i({theme:g.currentTarget.value})},u=()=>{r(!0)};P(()=>{if(!n)return;const g=N=>{N.preventDefault(),N.stopPropagation(),i({singleScreenToggleKey:N.key}),r(!1)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[n,e]);const p=e.layout==="single-screen"||e.layout==="top-only"||e.layout==="bottom-only",f=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter","dim","nord","sunset"];return o("div",{className:"display-settings-container",children:[o("h4",{className:"settings-section-title",children:"Interface Theme"}),o("div",{className:"form-control",children:[o("label",{className:"label",children:o("span",{className:"label-text",children:"UI Theme"})}),o("select",{className:"select select-bordered w-full",value:e.theme,onChange:h,children:f.map(g=>o("option",{value:g,children:g.charAt(0).toUpperCase()+g.slice(1)},g))}),o("label",{className:"label",children:o("span",{className:"label-text-alt",children:"Choose a color theme for the emulator interface."})})]}),o("div",{className:"divider"}),o("h4",{className:"settings-section-title",children:"Screen Layout"}),o("div",{className:"form-control",children:[o("label",{className:"label",children:o("span",{className:"label-text",children:"Layout Style"})}),o("select",{className:"select select-bordered w-full",value:e.layout,onChange:a,children:[o("option",{value:"natural",children:"Natural (Vertical)"}),o("option",{value:"horizontal",children:"Side by Side"}),o("option",{value:"horizontal-swap",children:"Side by Side (Reversed)"}),o("option",{value:"top-emphasis",children:"Top Emphasis (Large Top, Small Bottom)"}),o("option",{value:"bottom-emphasis",children:"Bottom Emphasis (Large Bottom, Small Top)"}),o("option",{value:"single-screen",children:"Single Screen (Toggleable)"}),o("option",{value:"top-only",children:"Top Screen Only (Fixed)"}),o("option",{value:"bottom-only",children:"Bottom Screen Only (Fixed)"})]}),o("label",{className:"label",children:o("span",{className:"label-text-alt",children:"Choose how the DS screens are arranged on your display."})})]}),p&&o("div",{className:"form-control",children:[o("label",{className:"label",children:o("span",{className:"label-text",children:"Screen Toggle Key"})}),o("div",{className:"keybind-container",children:[o("button",{className:`btn ${n?"btn-primary":"btn-outline"} keybind-button`,onClick:u,children:n?"Press any key...":e.singleScreenToggleKey}),o("span",{className:"keybind-hint",children:"Press to toggle between Top and Bottom screen"})]}),o("label",{className:"label",children:o("span",{className:"label-text-alt",children:["Currently showing: ",o("strong",{children:e.currentSingleScreen==="top"?"Top Screen":"Bottom Screen"})]})})]}),o("div",{className:"form-control",children:[o("label",{className:"label",children:o("span",{className:"label-text",children:["Screen Gap: ",e.screenGap,"px"]})}),o("input",{type:"range",min:"0",max:"100",value:e.screenGap,onChange:l,className:"range range-primary"}),o("label",{className:"label",children:o("span",{className:"label-text-alt",children:"Adjust the gap between the two screens (simulates DS hinge)."})})]}),o("div",{className:"divider"}),o("h4",{className:"settings-section-title",children:"Screen Options"}),o("div",{className:"form-control",children:o("label",{className:"label cursor-pointer justify-start gap-4",children:[o("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:e.swapScreens,onChange:s}),o("div",{children:[o("span",{className:"label-text",children:"Swap Screens"}),o("p",{className:"label-text-alt",children:"Swap the positions of the top and bottom screens."})]})]})}),o("div",{className:"form-control",children:o("label",{className:"label cursor-pointer justify-start gap-4",children:[o("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:e.screenFilter,onChange:d}),o("div",{children:[o("span",{className:"label-text",children:"Smooth Scaling (Bilinear Filter)"}),o("p",{className:"label-text-alt",children:"Apply smoothing when scaling screens. Disable for sharp pixels."})]})]})}),o("div",{className:"form-control",children:o("label",{className:"label cursor-pointer justify-start gap-4",children:[o("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:e.integerScale,onChange:c}),o("div",{children:[o("span",{className:"label-text",children:"Integer Scaling"}),o("p",{className:"label-text-alt",children:"Scale screens by whole numbers only (1x, 2x, 3x) for pixel-perfect display."})]})]})}),o("div",{className:"divider"}),o("div",{className:"layout-preview",children:[o("h4",{className:"settings-section-title",children:"Preview"}),o("div",{className:`preview-container preview-${e.layout} ${e.swapScreens?"preview-swapped":""} ${e.layout==="single-screen"?`preview-single-${e.currentSingleScreen}`:""}`,children:[o("div",{className:"preview-screen preview-top",style:{marginBottom:e.layout==="natural"?`${e.screenGap/4}px`:"0"},children:o("span",{children:"Top"})}),o("div",{className:"preview-screen preview-bottom",style:{marginLeft:e.layout==="horizontal"||e.layout==="horizontal-swap"?`${e.screenGap/4}px`:"0"},children:o("span",{children:"Bottom"})})]})]})]})}function Fn({onOpenSettings:e,stopEmulating:t}){const[n,r]=S("Nintendo DS"),[i,a]=S(""),[l,s]=S(!1),[c,d]=S(!1),[h,u]=S(!1),[p,f]=S(ve()),[g,N]=S(!0),x=me(null),v=()=>{t()},w=()=>{N(!0),x.current&&clearTimeout(x.current),x.current=window.setTimeout(()=>{c||N(!1)},3e3)};P(()=>{const k=()=>{w()},I=()=>{c||N(!1)};return window.addEventListener("mousemove",k),document.addEventListener("mouseleave",I),w(),()=>{window.removeEventListener("mousemove",k),document.removeEventListener("mouseleave",I),x.current&&clearTimeout(x.current)}},[c]);const D=()=>{c||(d(!0),N(!0),window.WebMelon.emulator.pause())},T=()=>{c&&(d(!1),window.WebMelon.emulator.resume(),w())},U=()=>{h||c||(u(!0),window.WebMelon.emulator.setEmulatorSpeed(2))},L=()=>{!h||c||(u(!1),window.WebMelon.emulator.setEmulatorSpeed(1))},z=()=>{D(),e()},$=()=>{window.WebMelon.emulator.shutdown()};P(()=>{const k=I=>{f(I.detail)};return window.addEventListener("displaySettingsChanged",k),()=>{window.removeEventListener("displaySettingsChanged",k)}},[]),P(()=>{const k=I=>{I.target instanceof HTMLInputElement||I.target instanceof HTMLTextAreaElement||I.target instanceof HTMLSelectElement||I.key===p.singleScreenToggleKey&&(p.layout===W.SingleScreen||p.layout===W.TopOnly||p.layout===W.BottomOnly)&&(I.preventDefault(),Ln())};return window.addEventListener("keydown",k),()=>{window.removeEventListener("keydown",k)}},[p.singleScreenToggleKey,p.layout]),P(()=>{if(document.getElementById("top-screen")&&!l)if(s(!0),window.WebMelon.emulator.startEmulation("top-screen","bottom-screen"),window.WebMelon.emulator.addShutdownListener(v),window.WebMelon.firmware.getFirmwareSettings().shouldFirmwareBoot)r("Main Menu"),a("Firmware Boot");else{const k=window.WebMelon.emulator.getGameTitle();if(k){const I=k.split(`
`);r(I[0]),I.length>1&&a(I[1])}}},[l]);const G=()=>{const k=["emulator-container"];return p.layout===W.SingleScreen?p.currentSingleScreen==="top"?k.push("layout-top-only"):k.push("layout-bottom-only"):k.push(`layout-${p.layout}`),p.swapScreens&&k.push("screens-swapped"),p.screenFilter||k.push("no-filter"),p.integerScale&&k.push("integer-scale"),k.join(" ")},_=()=>p.layout===W.BottomOnly?!0:p.layout===W.SingleScreen?p.currentSingleScreen!=="top":!1,m=()=>p.layout===W.TopOnly?!0:p.layout===W.SingleScreen?p.currentSingleScreen!=="bottom":!1,b=()=>({gap:`${p.screenGap}px`}),E=()=>{const k=["emulator-screen"];return p.layout===W.TopEmphasis?k.push("screen-large"):p.layout===W.BottomEmphasis&&k.push("screen-small"),_()&&k.push("screen-hidden"),k.join(" ")},B=()=>{const k=["emulator-screen"];return p.layout===W.BottomEmphasis?k.push("screen-large"):p.layout===W.TopEmphasis&&k.push("screen-small"),m()&&k.push("screen-hidden"),k.join(" ")},K=p.layout===W.SingleScreen||p.layout===W.TopOnly||p.layout===W.BottomOnly,Y=p.currentSingleScreen==="top"?"Top":"Bottom";return o("div",{className:"emulator-wrapper",children:[o("div",{className:`emulator-header ${g?"visible":""}`,children:[o("div",{className:"game-title-text-container",children:o("span",{className:"game-title-text",children:[o("b",{children:n}),i&&` (${i})`,K&&o("span",{className:"screen-indicator",children:[" â€” ",Y," [",p.singleScreenToggleKey,"]"]})]})}),o("div",{className:"emulator-controls-section",children:[o("div",{className:"tooltip","data-tip":"Stop",children:o("button",{className:"btn btn-square btn-sm",onClick:$,children:o(Dn,{size:"1.2em"})})}),o("div",{className:"tooltip","data-tip":"Settings",children:o("button",{className:"btn btn-square btn-sm",onClick:z,children:o(Tt,{size:"1.2em"})})}),o("div",{className:"tooltip","data-tip":c?"Resume":"Pause",children:o("button",{className:c?"btn btn-square btn-sm btn-primary":"btn btn-square btn-sm",onClick:c?T:D,children:o(Bn,{size:"1.2em"})})}),o("div",{className:"tooltip","data-tip":h?"Normal Speed":"Fast Forward",children:o("button",{className:h?"btn btn-square btn-sm btn-primary":"btn btn-square btn-sm",onClick:h?L:U,children:o(In,{size:"1.2em"})})})]})]}),o("div",{className:G(),style:b(),children:[o("canvas",{className:E(),id:"top-screen",height:"192",width:"256"}),o("canvas",{className:B(),id:"bottom-screen",height:"192",width:"256"})]})]})}function $n({onStartEmulating:e,onOpenSettings:t}){const[n,r]=S(null),[i,a]=S(null),[l,s]=S(!1),[c,d]=S(!1),[h,u]=S(!1),p=v=>{let w=v.target;!w.files||w.files.length===0||(a(w.files[0]),r(w.files[0].name))},f=v=>{var w;v.preventDefault(),(w=v.dataTransfer)!=null&&w.files.length&&(a(v.dataTransfer.files[0]),r(v.dataTransfer.files[0].name))},g=re(async()=>{if(console.log("starting prepare handler"),c){if(i){let v=window.WebMelon.cart.getUnloadedCartCode();console.log("Firmware boot with cart:",v),window.WebMelon.emulator.setSavePath("/savefiles/"+v+".sav"),window.WebMelon.emulator.loadCart()}window.WebMelon.emulator.loadUserBIOS()}else{let v=window.WebMelon.cart.getUnloadedCartCode();console.log(v),window.WebMelon.emulator.setSavePath("/savefiles/"+v+".sav"),window.WebMelon.emulator.loadFreeBIOS(),window.WebMelon.emulator.loadCart()}s(!1),e()},[c,i]),N=re(async()=>{if(!window.WebMelon||!i||l)return;s(!0);const v=new Uint8Array(await i.arrayBuffer());if(window.WebMelon.cart.createCart(),window.WebMelon.storage.createDirectory("/roms"),window.WebMelon.storage.write("/roms/game.nds",v),window.WebMelon.emulator.createEmulator(),!window.WebMelon.cart.loadFileIntoCart("/roms/game.nds")){s(!1);return}window.WebMelon.storage.onPrepare(g),window.WebMelon.storage.prepareVirtualFilesystem()},[i,l]),x=re(async()=>{if(!(!window.WebMelon||l)){if(s(!0),i){const v=new Uint8Array(await i.arrayBuffer());if(window.WebMelon.cart.createCart(),window.WebMelon.storage.createDirectory("/roms"),window.WebMelon.storage.write("/roms/game.nds",v),window.WebMelon.emulator.createEmulator(),!window.WebMelon.cart.loadFileIntoCart("/roms/game.nds")){s(!1);return}}else window.WebMelon.emulator.createEmulator();d(!0)}},[l,h,c,i]);return P(()=>{c&&(window.WebMelon.storage.onPrepare(g),window.WebMelon.storage.prepareVirtualFilesystem())},[c]),P(()=>{window.WebMelon.firmware.canFirmwareBoot(),setTimeout(()=>{u(window.WebMelon.firmware.canFirmwareBoot())},500)},[]),o("div",{className:"entrypoint-container",children:[o("label",{for:"rom-file-input",onDrop:f,onDragOver:v=>v.preventDefault(),children:o("div",{className:"rom-input-container",children:[o(Bt,{size:36}),o("p",{className:"rom-input-title",children:o("b",{children:"Insert ROM file"})}),o("p",{className:"rom-input-subtitle",children:"Drag and drop or click to browse"}),n?o("p",{className:"rom-input-selected",children:n}):""]})}),o("input",{type:"file",id:"rom-file-input",onChange:p,accept:".nds"}),o("div",{className:"button-group",children:[o("button",{class:"btn btn-primary play-button",disabled:i===null||l,onClick:N,children:[l?o("span",{className:"loading loading-spinner loading-xs"}):""," Play"]}),h?o("button",{class:"btn btn-secondary play-button",disabled:l,onClick:x,children:[l?o("span",{className:"loading loading-spinner loading-xs"}):""," Firmware Boot",i&&o("span",{className:"text-xs ml-1",children:"(with game)"})]}):null,o("button",{class:"btn btn-outline settings-button",onClick:t,children:[o(Tt,{size:18})," Settings"]})]})]})}function Hn(e){return A({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M467.51 248.83c-18.4-83.18-45.69-136.24-89.43-149.17A91.5 91.5 0 0 0 352 96c-26.89 0-48.11 16-96 16s-69.15-16-96-16a99.09 99.09 0 0 0-27.2 3.66C89 112.59 61.94 165.7 43.33 248.83c-19 84.91-15.56 152 21.58 164.88 26 9 49.25-9.61 71.27-37 25-31.2 55.79-40.8 119.82-40.8s93.62 9.6 118.66 40.8c22 27.41 46.11 45.79 71.42 37.16 41.02-14.01 40.44-79.13 21.43-165.04z"},child:[]},{tag:"circle",attr:{cx:"292",cy:"224",r:"20"},child:[]},{tag:"path",attr:{d:"M336 288a20 20 0 1 1 20-19.95A20 20 0 0 1 336 288z"},child:[]},{tag:"circle",attr:{cx:"336",cy:"180",r:"20"},child:[]},{tag:"circle",attr:{cx:"380",cy:"224",r:"20"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M160 176v96m48-48h-96"},child:[]}]})(e)}function jn(e){return A({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"352",height:"352",x:"80",y:"80",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"48",ry:"48"},child:[]},{tag:"rect",attr:{width:"224",height:"224",x:"144",y:"144",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"16",ry:"16"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 80V48m80 32V48M176 80V48m80 416v-32m80 32v-32m-160 32v-32m256-176h32m-32 80h32m-32-160h32M48 256h32m-32 80h32M48 176h32"},child:[]}]})(e)}function Rn(e){return A({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm8 336c0 4.411-3.589 8-8 8H48c-4.411 0-8-3.589-8-8V112c0-4.411 3.589-8 8-8h480c4.411 0 8 3.589 8 8v288zM170 270v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm-336 82v-28c0-6.627-5.373-12-12-12H82c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm384 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zM122 188v-28c0-6.627-5.373-12-12-12H82c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm-98 158v-16c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v16c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"},child:[]}]})(e)}function Un(e){return A({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"},child:[]}]})(e)}function zn(){const[e,t]=S(50),[n,r]=S(50);return P(()=>{const l=window.WebMelon.input.getInputSettings();t(l.gamepadAxisSensitivity*100),r(l.gamepadRumbleIntensity*100)}),o("div",{className:"input-container",children:[o("div",{class:"label",children:o("span",{class:"label-text",children:"Controller Axis Sensitivity"})}),o("input",{type:"range",min:0,max:100,step:1,value:e,onChange:l=>{const s=parseInt(l.currentTarget.value);let c=window.WebMelon.input.getInputSettings();c.gamepadAxisSensitivity=s/100,window.WebMelon.input.setInputSettings(c)},className:"range"}),o("div",{class:"label",children:o("span",{class:"label-text-alt",children:"Setting this higher will make controller axes trigger less easily. If this is set too low, you may not be able to select two buttons at the same time (such as using the top left corner to select D-Pad Left and D-Pad Up simultaneously)."})}),o("div",{class:"label",children:o("span",{class:"label-text",children:"Rumble Pak Intensity"})}),o("input",{type:"range",min:0,max:100,step:1,value:n,onChange:l=>{const s=parseInt(l.currentTarget.value);let c=window.WebMelon.input.getInputSettings();c.gamepadRumbleIntensity=s/100,window.WebMelon.input.setInputSettings(c)},className:"range"}),o("div",{class:"label",children:o("span",{class:"label-text-alt",children:"Determine how much the controller should vibrate in games that support the Nintendo DS Rumble Pak."})})]})}function Vn(){const[e,t]=S("keyboard"),[n,r]=S([]),[i,a]=S(!1),[l,s]=S(!1),[c,d]=S(0),[h,u]=S(!1),[p,f]=S(!0),[g,N]=S(.5),[x,v]=S(.5);P(()=>{const _=()=>{const b=navigator.getGamepads();u(b.some(E=>E!==null))};_();const m=setInterval(_,1e3);return window.addEventListener("gamepadconnected",_),window.addEventListener("gamepaddisconnected",_),()=>{clearInterval(m),window.removeEventListener("gamepadconnected",_),window.removeEventListener("gamepaddisconnected",_)}},[]);const w=()=>{const _=window.WebMelon.input.getInputSettings();if(f(_.rumbleEnabled??!0),N(_.gamepadRumbleIntensity??.5),v(_.gamepadAxisSensitivity??.5),e==="keyboard"){let m=[];for(const b in window.WebMelon.constants.DS_INPUT_MAP){let E=window.WebMelon.constants.DS_INPUT_MAP[b],B=Object.keys(_.keybinds).filter(k=>_.keybinds[k]===E);const K=B.filter(k=>!_.alternateKeybinds.includes(k))[0]??null,Y=B.filter(k=>_.alternateKeybinds.includes(k))[0]??null;m.push({keyPrimary:K,keyAlternate:Y,gamepadButtons:[],name:window.WebMelon.constants.DS_BUTTON_NAME_MAP[b],bitfield:E,buttonKey:b})}r(m)}else{let m=[];for(const b in window.WebMelon.constants.DS_INPUT_MAP){let E=window.WebMelon.constants.DS_INPUT_MAP[b],B=_.gamepadBinds[b]||[];m.push({keyPrimary:null,keyAlternate:null,gamepadButtons:B,name:window.WebMelon.constants.DS_BUTTON_NAME_MAP[b],bitfield:E,buttonKey:b})}r(m)}},D=()=>{let _={},m=[];for(const E of n)E.keyPrimary&&(_[E.keyPrimary]=E.bitfield),E.keyAlternate&&(_[E.keyAlternate]=E.bitfield,m.push(E.keyAlternate));let b=window.WebMelon.input.getInputSettings();b.keybinds=_,b.alternateKeybinds=m,window.WebMelon.input.setInputSettings(b)},T=()=>{let _={};for(const b of n)_[b.buttonKey]=b.gamepadButtons;let m=window.WebMelon.input.getInputSettings();m.gamepadBinds=_,window.WebMelon.input.setInputSettings(m)},U=()=>{let _=window.WebMelon.input.getInputSettings();_.rumbleEnabled=p,_.gamepadRumbleIntensity=g,_.gamepadAxisSensitivity=x,window.WebMelon.input.setInputSettings(_)},L=(_,m)=>{d(_),s(m),a(!0)},z=(_,m)=>{let b=[...n];e==="keyboard"?(m?b[_].keyAlternate=null:b[_].keyPrimary=null,r(b),D()):(b[_].gamepadButtons=[],r(b),T()),a(!1)},$=_=>{let m=[...n];for(const b in m)m[b].keyPrimary===_.key&&(m[b].keyPrimary=null),m[b].keyAlternate===_.key&&(m[b].keyAlternate=null),b===c.toString()&&(l?m[b].keyAlternate=_.key:m[b].keyPrimary=_.key);r(m),D(),a(!1)};P(()=>{if(!i||e!=="controller")return;let _;const m=()=>{const E=navigator.getGamepads()[0];if(E){for(let B=0;B<E.buttons.length;B++)if(E.buttons[B].pressed){let K=[...n];const Y=K[c].gamepadButtons;Y.includes(B)||(K[c].gamepadButtons=[...Y,B]),r(K),T(),a(!1);return}}_=requestAnimationFrame(m)};return _=requestAnimationFrame(m),()=>{_&&cancelAnimationFrame(_)}},[i,e,c,n]),P(()=>{if(i&&e==="keyboard")return window.addEventListener("keydown",$),()=>{window.removeEventListener("keydown",$)}},[i,e]),P(()=>{a(!1),w()},[e]),P(()=>{U()},[p,g,x]);const G=()=>{const _=window.WebMelon.constants;let m=window.WebMelon.input.getInputSettings();e==="keyboard"?(m.keybinds=_.DEFAULT_KEYBOARD_BINDINGS,m.alternateKeybinds=[]):m.gamepadBinds=_.DEFAULT_GAMEPAD_BINDINGS,window.WebMelon.input.setInputSettings(m),w()};return o("div",{className:"controls-container",children:[o("div",{className:"controls-input-mode-selector",children:o("div",{className:"join",children:[o("input",{className:"join-item btn",type:"radio",name:"options","aria-label":"Keyboard",checked:e==="keyboard",onClick:()=>t("keyboard")}),o("input",{className:"join-item btn",type:"radio",name:"options","aria-label":"Controller",checked:e==="controller",onClick:()=>t("controller")})]})}),e==="controller"&&!h&&o("div",{className:"alert alert-warning mb-4",children:o("span",{children:"No gamepad detected. Please connect a controller."})}),o("div",{className:"alert alert-info mb-4",children:[o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6",children:o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o("div",{children:[o("p",{className:"font-semibold",children:"How to bind controls:"}),o("p",{className:"text-sm",children:e==="keyboard"?"Click on Primary or Alternate column to bind a key. You can have 2 keys per action. Right-click to remove a binding.":"Click to add a button. You can add multiple buttons to the same action (they will all trigger it). Right-click to clear all bindings for that action."})]})]}),o("div",{className:"controls-list",children:n.length===0?o("span",{children:"Loading controls..."}):e==="keyboard"?n.map((_,m)=>o("div",{className:"controls-control",children:[o("div",{className:"controls-ctrl-name",children:o("span",{className:"controls-ctrl-name-text",children:_.name})}),o("div",{className:i&&c===m&&!l?"controls-ctrl-primary controls-ctrl-active":"controls-ctrl-primary",onClick:()=>L(m,!1),onContextMenu:b=>{b.preventDefault(),z(m,!1)},children:o("span",{children:_.keyPrimary?o("kbd",{className:"kbd kbd-sm",children:_.keyPrimary.toUpperCase()}):o("span",{className:i&&c===m&&!l?"unbound-text-active":"unbound-text",children:i&&c===m&&!l?"press key":"click to bind..."})})}),o("div",{className:i&&c===m&&l?"controls-ctrl-alternate controls-ctrl-active":"controls-ctrl-alternate",onClick:()=>L(m,!0),onContextMenu:b=>{b.preventDefault(),z(m,!0)},children:o("span",{children:_.keyAlternate?o("kbd",{className:"kbd kbd-sm",children:_.keyAlternate.toUpperCase()}):o("span",{className:i&&c===m&&l?"unbound-text-active":"unbound-text",children:i&&c===m&&l?"press key":"click to bind..."})})})]},m)):n.map((_,m)=>o("div",{className:"controls-control",children:[o("div",{className:"controls-ctrl-name",children:o("span",{className:"controls-ctrl-name-text",children:_.name})}),o("div",{className:i&&c===m?"controls-ctrl-primary controls-ctrl-active":"controls-ctrl-primary",onClick:()=>L(m,!1),onContextMenu:b=>{b.preventDefault(),z(m,!1)},style:{flexBasis:"250px"},children:o("span",{children:_.gamepadButtons.length>0?o("div",{className:"flex flex-wrap gap-1",children:_.gamepadButtons.map((b,E)=>o("kbd",{className:"kbd kbd-sm",children:["Button ",b]},E))}):o("span",{className:i&&c===m?"unbound-text-active":"unbound-text",children:i&&c===m?"press button...":"click to bind..."})})})]},m))}),e==="controller"&&o(O,{children:[o("div",{className:"divider"}),o("h4",{className:"text-lg font-semibold mb-2",children:"Gamepad Settings"}),o("div",{className:"form-control mb-4",children:[o("label",{className:"label",children:o("span",{className:"label-text",children:["Analog Stick Sensitivity: ",Math.round(x*100),"%"]})}),o("input",{type:"range",min:"0",max:"100",value:x*100,onChange:_=>v(parseInt(_.currentTarget.value)/100),className:"range range-primary"})]}),o("div",{className:"form-control mb-4",children:o("label",{className:"label cursor-pointer justify-start gap-4",children:[o("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:p,onChange:_=>f(_.currentTarget.checked)}),o("div",{children:[o("span",{className:"label-text",children:"Enable Rumble"}),o("p",{className:"label-text-alt",children:"Enable controller vibration for compatible games."})]})]})}),p&&o("div",{className:"form-control mb-4",children:[o("label",{className:"label",children:o("span",{className:"label-text",children:["Rumble Intensity: ",Math.round(g*100),"%"]})}),o("input",{type:"range",min:"0",max:"100",value:g*100,onChange:_=>N(parseInt(_.currentTarget.value)/100),className:"range range-primary"})]})]}),o("div",{className:"divider"}),o("button",{className:"btn btn-warning w-full",onClick:G,children:["Reset ",e==="keyboard"?"Keyboard":"Gamepad"," to Defaults"]})]})}function Gn(){const[e,t]=S(window.WebMelon.firmware.getFirmwareSettings()),n=l=>{let s=Object.assign({},e);s.language=parseInt(l.currentTarget.value),t(window.WebMelon.firmware.setFirmwareSettings(s))},r=l=>{const s=parseInt(l.currentTarget.value);let c=Object.assign({},e);c.birthdayMonth=s;let d=new Date(2008,s,0).getDate();c.birthdayDay>d&&(c.birthdayDay=1),t(window.WebMelon.firmware.setFirmwareSettings(c))},i=l=>{const s=parseInt(l.currentTarget.value);let c=Object.assign({},e);c.birthdayDay=s,t(window.WebMelon.firmware.setFirmwareSettings(c))},a=l=>{let s=Object.assign({},e);s.nickname=l.currentTarget.value,t(window.WebMelon.firmware.setFirmwareSettings(s))};return o("div",{className:"personalization-container",children:[o("div",{className:"label",children:o("span",{class:"label-text",children:"Name"})}),o("input",{type:"text",placeholder:"Name",maxlength:10,value:e.nickname,onChange:a,className:"input input-bordered w-full"}),o("div",{className:"label",children:o("span",{class:"label-text-alt",children:"This name will be shown in games and menus inside the emulator. Max length: 10 characters."})}),o("div",{className:"label",children:o("span",{class:"label-text",children:"Birthday (MM/DD)"})}),o("div",{className:"birthday-selection",children:[o("div",{className:"birthday-selector",children:o("select",{className:"select select-bordered w-full max-w-xs",onChange:r,children:Array.from({length:12},(l,s)=>s+1).map(l=>o("option",{selected:l===e.birthdayMonth,children:l},l))})}),o("div",{className:"birthday-selector",children:o("select",{className:"select select-bordered w-full max-w-xs",onChange:i,children:Array.from({length:new Date(2008,e.birthdayMonth,0).getDate()},(l,s)=>s+1).map(l=>o("option",{selected:l===e.birthdayDay,children:l},l))})})]}),o("div",{className:"label",children:o("span",{class:"label-text-alt",children:"Some games may add easter eggs on this day. This doesn't have to be your real birthday."})}),o("div",{className:"label",children:o("span",{class:"label-text",children:"Language"})}),o("div",{className:"birthday-selection",children:o("div",{className:"birthday-selector",children:o("select",{className:"select select-bordered w-full max-w-xs",onChange:n,children:window.WebMelon.constants.FIRMWARE_LANGUAGES.map(l=>o("option",{selected:e.language===l.id,value:l.id,children:l.name},l.id))})})}),o("div",{className:"label",children:o("span",{class:"label-text-alt",children:"This language will be used as the firmware language and may be used by the games in the emulator as well."})})]})}function Kn(){const[e,t]=S(!1),[n,r]=S(!1),[i,a]=S(!1),l=async h=>{const u=["bios7.bin","bios9.bin","firmware.bin"];for(const p of h){if(!u.includes(p.name))return;window.WebMelon.firmware.uploadBiosFile(p.name,new Uint8Array(await p.arrayBuffer()))}s(),window.WebMelon.storage.sync()},s=()=>{const h=window.WebMelon.firmware.getActiveBiosFiles();t(h.hasBios7),r(h.hasBios9),a(h.hasFirmware)},c=h=>{let u=h.target;!u.files||u.files.length===0||l(u.files)},d=h=>{var u;h.preventDefault(),(u=h.dataTransfer)!=null&&u.files.length&&l(h.dataTransfer.files)};return P(()=>{s()},[]),o("div",{className:"firmware-container",children:[o("label",{for:"firmware-file-input",onDrop:d,onDragOver:h=>h.preventDefault(),children:o("div",{className:"firmware-input-container",children:[o(Bt,{size:30}),o("p",{children:o("b",{children:"Add BIOS files"})}),o("p",{children:"Accepts: bios7.bin, bios9.bin, firmware.bin"})]})}),o("input",{type:"file",id:"firmware-file-input",onChange:c}),o("br",{}),o("ul",{children:[o("li",{children:["bios7.bin: ",o("b",{children:e?"Provided":"Missing"})]}),o("li",{children:["bios9.bin: ",o("b",{children:n?"Provided":"Missing"})]}),o("li",{children:["firmware.bin: ",o("b",{children:i?"Provided":"Missing"})]})]})]})}const Se={microphoneEnabled:!1};function qn(){const e=window.localStorage.getItem("audioSettings");if(e)try{return{...Se,...JSON.parse(e)}}catch{return Se}return Se}function rt(e){window.localStorage.setItem("audioSettings",JSON.stringify(e))}function Jn(){const[e,t]=S(qn()),[n,r]=S("prompt"),[i,a]=S(!1);P(()=>{navigator.permissions&&navigator.permissions.query({name:"microphone"}).then(c=>{r(c.state),c.onchange=()=>{r(c.state)}}).catch(()=>{r("prompt")});const s=window.WebMelon;s!=null&&s.microphone&&a(s.microphone.isMicrophoneActive())},[]);const l=async()=>{const s=!e.microphoneEnabled,c={...e,microphoneEnabled:s};t(c),rt(c);const d=window.WebMelon;if(d!=null&&d.microphone){const h=d.microphone.getMicrophoneSettings();if(d.microphone.setMicrophoneSettings({...h,enabled:s}),s)try{await d.microphone.startMicrophone(),a(!0),r("granted")}catch(u){console.error("Failed to start microphone:",u),r("denied");const p={...e,microphoneEnabled:!1};t(p),rt(p)}else d.microphone.stopMicrophone(),a(!1)}};return o("div",{class:"audio-settings-container",children:[o("h2",{class:"settings-title",children:"Audio Settings"}),o("div",{class:"card bg-base-200 shadow-md mb-6",children:o("div",{class:"card-body",children:[o("h3",{class:"card-title text-lg",children:"Microphone"}),o("p",{class:"text-sm opacity-70 mb-4",children:"Enable microphone input for games that support it (e.g., Nintendogs, Zelda: Phantom Hourglass)."}),o("div",{class:"form-control",children:o("label",{class:"label cursor-pointer justify-start gap-4",children:[o("input",{type:"checkbox",class:"toggle toggle-primary",checked:e.microphoneEnabled,onChange:l}),o("span",{class:"label-text font-semibold",children:"Enable Microphone"})]})}),n==="denied"&&o("div",{class:"alert alert-warning mt-4",children:[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),o("span",{children:"Microphone access was denied. Please allow microphone access in your browser settings."})]}),i&&o("div",{class:"alert alert-success mt-4",children:[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),o("span",{children:"Microphone is active"})]})]})})]})}const se={display:{displayName:"Display",icon:o(Tn,{}),component:An},audio:{displayName:"Audio",icon:o(Un,{}),component:Jn},controls:{displayName:"Controls",icon:o(Rn,{}),component:Vn},personalization:{displayName:"Personalization",icon:o(On,{}),component:Gn},input:{displayName:"Controller Input",icon:o(Hn,{}),component:zn},firmware:{displayName:"Firmware",icon:o(jn,{}),component:Kn}};function Yn({showing:e,onClose:t}){const n=me(null),[r,i]=S("display"),a=()=>{window.localStorage.setItem("inputSettings",JSON.stringify(window.WebMelon.input.getInputSettings())),window.localStorage.setItem("firmwareSettings",JSON.stringify(window.WebMelon.firmware.getFirmwareSettings())),t()};P(()=>{if(!n.current||!window.WebMelon)return;if(!e){n.current.close();return}const s=c=>{c.key==="Escape"&&e&&a()};return window.addEventListener("keydown",s),n.current.showModal(),()=>{window.removeEventListener("keydown",s)}},[e]),P(()=>{if(!window.WebMelon){console.error("WebMelon not loaded");return}const s=window.localStorage.getItem("inputSettings"),c=window.localStorage.getItem("firmwareSettings");if(s){const d=JSON.parse(s);window.WebMelon.input.setInputSettings(d)}if(c){const d=JSON.parse(c);window.WebMelon.firmware.setFirmwareSettings(d)}},[]);const l=se[r].component;return o("dialog",{ref:n,id:"settings-modal",className:"modal",children:o("form",{method:"dialog",className:"modal-box w-11/12 max-w-5xl",children:[o("h3",{className:"font-bold text-lg",children:"Settings"}),o("div",{className:"settings-box-container",children:[o("ul",{className:"menu bg-base-200 rounded-box settings-menu",children:Object.keys(se).map(s=>o("li",{children:o("a",{className:r===s?"active":"",onClick:()=>i(s),children:[se[s].icon," ",se[s].displayName]})},s))}),o("div",{className:"settings-item",children:e?o(l,{}):null})]}),o("div",{className:"modal-action",children:o("button",{className:"btn",onClick:a,children:"Close"})})]})})}function Zn(){const[e,t]=S(!1),[n,r]=S(!1),i=async()=>{t(!0)},a=async()=>{t(!1)},l=()=>{r(!0)};return o(O,{children:[o("div",{className:"demo-page-container place-content-center",children:e?o(Fn,{onOpenSettings:l,stopEmulating:a}):o($n,{onStartEmulating:i,onOpenSettings:l})}),o(Yn,{showing:n,onClose:()=>{r(!1)}})]})}function Xn(){return o(O,{children:o("div",{children:o(Zn,{})})})}const Qn=ve();document.documentElement.setAttribute("data-theme",Qn.theme);X(o(Xn,{}),document.getElementById("app"));
