(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var oe,v,nt,K,De,rt,Se,Pe,Ne,ke,ot,re={},at=[],Ot=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,pe=Array.isArray;function H(e,t){for(var n in t)e[n]=t[n];return e}function it(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function j(e,t,n){var r,o,i,l={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:l[i]=t[i];if(arguments.length>2&&(l.children=arguments.length>3?oe.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)l[i]===void 0&&(l[i]=e.defaultProps[i]);return te(e,l,r,o,null)}function te(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++nt,__i:-1,__u:0};return o==null&&v.vnode!=null&&v.vnode(i),i}function Bt(){return{current:null}}function O(e){return e.children}function F(e,t){this.props=e,this.context=t}function Y(e,t){if(t==null)return e.__?Y(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Y(e):null}function lt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return lt(e)}}function xe(e){(!e.__d&&(e.__d=!0)&&K.push(e)&&!ue.__r++||De!==v.debounceRendering)&&((De=v.debounceRendering)||rt)(ue)}function ue(){var e,t,n,r,o,i,l,c;for(K.sort(Se);e=K.shift();)e.__d&&(t=K.length,r=void 0,i=(o=(n=e).__v).__e,l=[],c=[],n.__P&&((r=H({},o)).__v=o.__v+1,v.vnode&&v.vnode(r),Te(n.__P,r,o,n.__n,n.__P.namespaceURI,32&o.__u?[i]:null,l,i??Y(o),!!(32&o.__u),c),r.__v=o.__v,r.__.__k[r.__i]=r,ut(l,r,c),r.__e!=i&&lt(r)),K.length>t&&K.sort(Se));ue.__r=0}function st(e,t,n,r,o,i,l,c,u,d,m){var s,p,f,g,k,x=r&&r.__k||at,b=t.length;for(n.__d=u,Dt(n,t,x),u=n.__d,s=0;s<b;s++)(f=n.__k[s])!=null&&(p=f.__i===-1?re:x[f.__i]||re,f.__i=s,Te(e,f,p,o,i,l,c,u,d,m),g=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&We(p.ref,null,f),m.push(f.ref,f.__c||g,f)),k==null&&g!=null&&(k=g),65536&f.__u||p.__k===f.__k?u=ct(f,u,e):typeof f.type=="function"&&f.__d!==void 0?u=f.__d:g&&(u=g.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=u,n.__e=k}function Dt(e,t,n){var r,o,i,l,c,u=t.length,d=n.length,m=d,s=0;for(e.__k=[],r=0;r<u;r++)(o=t[r])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=r+s,(o=e.__k[r]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?te(null,o,null,null,null):pe(o)?te(O,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?te(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,i=null,(c=o.__i=Lt(o,n,l,m))!==-1&&(m--,(i=n[c])&&(i.__u|=131072)),i==null||i.__v===null?(c==-1&&s--,typeof o.type!="function"&&(o.__u|=65536)):c!==l&&(c==l-1?s--:c==l+1?s++:(c>l?s--:s++,o.__u|=65536))):o=e.__k[r]=null;if(m)for(r=0;r<d;r++)(i=n[r])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=Y(i)),dt(i,i))}function ct(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=ct(r[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=Y(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function U(e,t){return t=t||[],e==null||typeof e=="boolean"||(pe(e)?e.some(function(n){U(n,t)}):t.push(e)),t}function Lt(e,t,n,r){var o=e.key,i=e.type,l=n-1,c=n+1,u=t[n];if(u===null||u&&o==u.key&&i===u.type&&!(131072&u.__u))return n;if(r>(u!=null&&!(131072&u.__u)?1:0))for(;l>=0||c<t.length;){if(l>=0){if((u=t[l])&&!(131072&u.__u)&&o==u.key&&i===u.type)return l;l--}if(c<t.length){if((u=t[c])&&!(131072&u.__u)&&o==u.key&&i===u.type)return c;c++}}return-1}function Le(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Ot.test(t)?n:n+"px"}function ie(e,t,n,r,o){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Le(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Le(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Pe,e.addEventListener(t,i?ke:Ne,i)):e.removeEventListener(t,i?ke:Ne,i);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Fe(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Pe++;else if(t.t<n.u)return;return n(v.event?v.event(t):t)}}}function Te(e,t,n,r,o,i,l,c,u,d){var m,s,p,f,g,k,x,b,w,B,I,R,D,z,$,G,_=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),i=[c=t.__e=n.__e]),(m=v.__b)&&m(t);e:if(typeof _=="function")try{if(b=t.props,w="prototype"in _&&_.prototype.render,B=(m=_.contextType)&&r[m.__c],I=m?B?B.props.value:m.__:r,n.__c?x=(s=t.__c=n.__c).__=s.__E:(w?t.__c=s=new _(b,I):(t.__c=s=new F(b,I),s.constructor=_,s.render=At),B&&B.sub(s),s.props=b,s.state||(s.state={}),s.context=I,s.__n=r,p=s.__d=!0,s.__h=[],s._sb=[]),w&&s.__s==null&&(s.__s=s.state),w&&_.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=H({},s.__s)),H(s.__s,_.getDerivedStateFromProps(b,s.__s))),f=s.props,g=s.state,s.__v=t,p)w&&_.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),w&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(w&&_.getDerivedStateFromProps==null&&b!==f&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(b,I),!s.__e&&(s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(b,s.__s,I)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(s.props=b,s.state=s.__s,s.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(h){h&&(h.__=t)}),R=0;R<s._sb.length;R++)s.__h.push(s._sb[R]);s._sb=[],s.__h.length&&l.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(b,s.__s,I),w&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(f,g,k)})}if(s.context=I,s.props=b,s.__P=e,s.__e=!1,D=v.__r,z=0,w){for(s.state=s.__s,s.__d=!1,D&&D(t),m=s.render(s.props,s.state,s.context),$=0;$<s._sb.length;$++)s.__h.push(s._sb[$]);s._sb=[]}else do s.__d=!1,D&&D(t),m=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++z<25);s.state=s.__s,s.getChildContext!=null&&(r=H(H({},r),s.getChildContext())),w&&!p&&s.getSnapshotBeforeUpdate!=null&&(k=s.getSnapshotBeforeUpdate(f,g)),st(e,pe(G=m!=null&&m.type===O&&m.key==null?m.props.children:m)?G:[G],t,n,r,o,i,l,c,u,d),s.base=t.__e,t.__u&=-161,s.__h.length&&l.push(s),x&&(s.__E=s.__=null)}catch(h){if(t.__v=null,u||i!=null){for(t.__u|=u?160:128;c&&c.nodeType===8&&c.nextSibling;)c=c.nextSibling;i[i.indexOf(c)]=null,t.__e=c}else t.__e=n.__e,t.__k=n.__k;v.__e(h,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Ft(n.__e,t,n,r,o,i,l,u,d);(m=v.diffed)&&m(t)}function ut(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)We(n[r],n[++r],n[++r]);v.__c&&v.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){v.__e(i,o.__v)}})}function Ft(e,t,n,r,o,i,l,c,u){var d,m,s,p,f,g,k,x=n.props,b=t.props,w=t.type;if(w==="svg"?o="http://www.w3.org/2000/svg":w==="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(d=0;d<i.length;d++)if((f=i[d])&&"setAttribute"in f==!!w&&(w?f.localName===w:f.nodeType===3)){e=f,i[d]=null;break}}if(e==null){if(w===null)return document.createTextNode(b);e=document.createElementNS(o,w,b.is&&b),c&&(v.__m&&v.__m(t,i),c=!1),i=null}if(w===null)x===b||c&&e.data===b||(e.data=b);else{if(i=i&&oe.call(e.childNodes),x=n.props||re,!c&&i!=null)for(x={},d=0;d<e.attributes.length;d++)x[(f=e.attributes[d]).name]=f.value;for(d in x)if(f=x[d],d!="children"){if(d=="dangerouslySetInnerHTML")s=f;else if(!(d in b)){if(d=="value"&&"defaultValue"in b||d=="checked"&&"defaultChecked"in b)continue;ie(e,d,null,f,o)}}for(d in b)f=b[d],d=="children"?p=f:d=="dangerouslySetInnerHTML"?m=f:d=="value"?g=f:d=="checked"?k=f:c&&typeof f!="function"||x[d]===f||ie(e,d,f,x[d],o);if(m)c||s&&(m.__html===s.__html||m.__html===e.innerHTML)||(e.innerHTML=m.__html),t.__k=[];else if(s&&(e.innerHTML=""),st(e,pe(p)?p:[p],t,n,r,w==="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,l,i?i[0]:n.__k&&Y(n,0),c,u),i!=null)for(d=i.length;d--;)it(i[d]);c||(d="value",w==="progress"&&g==null?e.removeAttribute("value"):g!==void 0&&(g!==e[d]||w==="progress"&&!g||w==="option"&&g!==x[d])&&ie(e,d,g,x[d],o),d="checked",k!==void 0&&k!==e[d]&&ie(e,d,k,x[d],o))}return e}function We(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(o){v.__e(o,n)}}function dt(e,t,n){var r,o;if(v.unmount&&v.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||We(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){v.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&dt(r[o],t,n||typeof e.type!="function");n||it(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function At(e,t,n){return this.constructor(e,n)}function Z(e,t,n){var r,o,i,l;v.__&&v.__(e,t),o=(r=typeof n=="function")?null:n&&n.__k||t.__k,i=[],l=[],Te(t,e=(!r&&n||t).__k=j(O,null,[e]),o||re,re,t.namespaceURI,!r&&n?[n]:o?null:t.firstChild?oe.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r,l),ut(i,e,l)}function _t(e,t){Z(e,t,_t)}function $t(e,t,n){var r,o,i,l,c=H({},e.props);for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)i=="key"?r=t[i]:i=="ref"?o=t[i]:c[i]=t[i]===void 0&&l!==void 0?l[i]:t[i];return arguments.length>2&&(c.children=arguments.length>3?oe.call(arguments,2):n),te(e.type,c,r||e.key,o||e.ref,null)}function Ht(e,t){var n={__c:t="__cC"+ot++,__:e,Consumer:function(r,o){return r.children(o)},Provider:function(r){var o,i;return this.getChildContext||(o=new Set,(i={})[t]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&o.forEach(function(c){c.__e=!0,xe(c)})},this.sub=function(l){o.add(l);var c=l.componentWillUnmount;l.componentWillUnmount=function(){o&&o.delete(l),c&&c.call(l)}}),r.children}};return n.Provider.__=n.Consumer.contextType=n}oe=at.slice,v={__e:function(e,t,n,r){for(var o,i,l;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),l=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),l=o.__d),l)return o.__E=o}catch(c){e=c}throw e}},nt=0,F.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=H({},this.state),typeof e=="function"&&(e=e(H({},n),this.props)),e&&H(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),xe(this))},F.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),xe(this))},F.prototype.render=O,K=[],rt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Se=function(e,t){return e.__v.__b-t.__v.__b},ue.__r=0,Pe=0,Ne=Fe(!1),ke=Fe(!0),ot=0;var Ut=0;function a(e,t,n,r,o,i){t||(t={});var l,c,u=t;"ref"in t&&(l=t.ref,delete t.ref);var d={type:e,props:u,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Ut,__i:-1,__u:0,__source:o,__self:i};if(typeof e=="function"&&(l=e.defaultProps))for(c in l)u[c]===void 0&&(u[c]=l[c]);return v.vnode&&v.vnode(d),d}var V,C,ve,Ae,X=0,pt=[],M=v,$e=M.__b,He=M.__r,Ue=M.diffed,je=M.__c,Re=M.unmount,ze=M.__;function Q(e,t){M.__h&&M.__h(C,e,X||t),X=0;var n=C.__H||(C.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function N(e){return X=1,Ie(bt,e)}function Ie(e,t,n){var r=Q(V++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):bt(void 0,t),function(c){var u=r.__N?r.__N[0]:r.__[0],d=r.t(u,c);u!==d&&(r.__N=[d,r.__[1]],r.__c.setState({}))}],r.__c=C,!C.u)){var o=function(c,u,d){if(!r.__c.__H)return!0;var m=r.__c.__H.__.filter(function(p){return!!p.__c});if(m.every(function(p){return!p.__N}))return!i||i.call(this,c,u,d);var s=!1;return m.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(s=!0)}}),!(!s&&r.__c.props===c)&&(!i||i.call(this,c,u,d))};C.u=!0;var i=C.shouldComponentUpdate,l=C.componentWillUpdate;C.componentWillUpdate=function(c,u,d){if(this.__e){var m=i;i=void 0,o(c,u,d),i=m}l&&l.call(this,c,u,d)},C.shouldComponentUpdate=o}return r.__N||r.__}function P(e,t){var n=Q(V++,3);!M.__s&&Oe(n.__H,t)&&(n.__=e,n.i=t,C.__H.__h.push(n))}function ae(e,t){var n=Q(V++,4);!M.__s&&Oe(n.__H,t)&&(n.__=e,n.i=t,C.__h.push(n))}function me(e){return X=5,he(function(){return{current:e}},[])}function mt(e,t,n){X=6,ae(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function he(e,t){var n=Q(V++,7);return Oe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ne(e,t){return X=8,he(function(){return e},t)}function ht(e){var t=C.context[e.__c],n=Q(V++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(C)),t.props.value):e.__}function ft(e,t){M.useDebugValue&&M.useDebugValue(t?t(e):e)}function gt(){var e=Q(V++,11);if(!e.__){for(var t=C.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function jt(){for(var e;e=pt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(se),e.__H.__h.forEach(Ce),e.__H.__h=[]}catch(t){e.__H.__h=[],M.__e(t,e.__v)}}M.__b=function(e){C=null,$e&&$e(e)},M.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ze&&ze(e,t)},M.__r=function(e){He&&He(e),V=0;var t=(C=e.__c).__H;t&&(ve===C?(t.__h=[],C.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(se),t.__h.forEach(Ce),t.__h=[],V=0)),ve=C},M.diffed=function(e){Ue&&Ue(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(pt.push(t)!==1&&Ae===M.requestAnimationFrame||((Ae=M.requestAnimationFrame)||Rt)(jt)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),ve=C=null},M.__c=function(e,t){t.some(function(n){try{n.__h.forEach(se),n.__h=n.__h.filter(function(r){return!r.__||Ce(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],M.__e(r,n.__v)}}),je&&je(e,t)},M.unmount=function(e){Re&&Re(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{se(r)}catch(o){t=o}}),n.__H=void 0,t&&M.__e(t,n.__v))};var Ve=typeof requestAnimationFrame=="function";function Rt(e){var t,n=function(){clearTimeout(r),Ve&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Ve&&(t=requestAnimationFrame(n))}function se(e){var t=C,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),C=t}function Ce(e){var t=C;e.__c=e.__(),C=t}function Oe(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function bt(e,t){return typeof t=="function"?t(e):t}function Me(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function Ee(e,t){this.props=e,this.context=t}function zt(e,t){function n(o){var i=this.props.ref,l=i==o.ref;return!l&&i&&(i.call?i(null):i.current=null),t?!t(this.props,o)||!l:Me(this.props,o)}function r(o){return this.shouldComponentUpdate=n,j(e,o)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(Ee.prototype=new F).isPureReactComponent=!0,Ee.prototype.shouldComponentUpdate=function(e,t){return Me(this.props,e)||Me(this.state,t)};var Ge=v.__b;v.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ge&&Ge(e)};var Vt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Gt(e){function t(n){if(!("ref"in n))return e(n,null);var r=n.ref;delete n.ref;var o=e(n,r);return n.ref=r,o}return t.$$typeof=Vt,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Ke=function(e,t){return e==null?null:U(U(e).map(t))},Kt={map:Ke,forEach:Ke,count:function(e){return e?U(e).length:0},only:function(e){var t=U(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:U},qt=v.__e;v.__e=function(e,t,n,r){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t)}qt(e,t,n,r)};var qe=v.unmount;function vt(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=function(r,o){for(var i in o)r[i]=o[i];return r}({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return vt(r,t,n)})),e}function yt(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return yt(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function ce(){this.__u=0,this.t=null,this.__b=null}function wt(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Jt(e){var t,n,r;function o(i){if(t||(t=e()).then(function(l){n=l.default||l},function(l){r=l}),r)throw r;if(!n)throw t;return j(n,i)}return o.displayName="Lazy",o.__f=!0,o}function ee(){this.u=null,this.o=null}v.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),qe&&qe(e)},(ce.prototype=new F).__c=function(e,t){var n=t.__c,r=this;r.t==null&&(r.t=[]),r.t.push(n);var o=wt(r.__v),i=!1,l=function(){i||(i=!0,n.__R=null,o?o(c):c())};n.__R=l;var c=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=yt(u,u.__c.__P,u.__c.__O)}var d;for(r.setState({__a:r.__b=null});d=r.t.pop();)d.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(l,l)},ce.prototype.componentWillUnmount=function(){this.t=[]},ce.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=vt(this.__b,n,r.__O=r.__P)}this.__b=null}var o=t.__a&&j(O,null,e.fallback);return o&&(o.__u&=-33),[j(O,null,t.__a?null:e.children),o]};var Je=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Yt(e){return this.getChildContext=function(){return e.context},e.children}function Zt(e){var t=this,n=e.i;t.componentWillUnmount=function(){Z(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(r){this.childNodes.push(r),t.i.appendChild(r)},insertBefore:function(r,o){this.childNodes.push(r),t.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),t.i.removeChild(r)}}),Z(j(Yt,{context:t.context},e.__v),t.l)}function Xt(e,t){var n=j(Zt,{__v:e,i:t});return n.containerInfo=t,n}(ee.prototype=new F).__a=function(e){var t=this,n=wt(t.__v),r=t.o.get(e);return r[0]++,function(o){var i=function(){t.props.revealOrder?(r.push(o),Je(t,e,r)):o()};n?n(i):i()}},ee.prototype.render=function(e){this.u=null,this.o=new Map;var t=U(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},ee.prototype.componentDidUpdate=ee.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){Je(e,n,t)})};var St=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Qt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,en=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,tn=/[A-Z0-9]/g,nn=typeof document<"u",rn=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function on(e,t,n){return t.__k==null&&(t.textContent=""),Z(e,t),typeof n=="function"&&n(),e?e.__c:null}function an(e,t,n){return _t(e,t),typeof n=="function"&&n(),e?e.__c:null}F.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(F.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Ye=v.event;function ln(){}function sn(){return this.cancelBubble}function cn(){return this.defaultPrevented}v.event=function(e){return Ye&&(e=Ye(e)),e.persist=ln,e.isPropagationStopped=sn,e.isDefaultPrevented=cn,e.nativeEvent=e};var Be,un={enumerable:!1,configurable:!0,get:function(){return this.class}},Ze=v.vnode;v.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,o={},i=r.indexOf("-")===-1;for(var l in n){var c=n[l];if(!(l==="value"&&"defaultValue"in n&&c==null||nn&&l==="children"&&r==="noscript"||l==="class"||l==="className")){var u=l.toLowerCase();l==="defaultValue"&&"value"in n&&n.value==null?l="value":l==="download"&&c===!0?c="":u==="translate"&&c==="no"?c=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?l="ondblclick":u!=="onchange"||r!=="input"&&r!=="textarea"||rn(n.type)?u==="onfocus"?l="onfocusin":u==="onblur"?l="onfocusout":en.test(l)&&(l=u):u=l="oninput":i&&Qt.test(l)?l=l.replace(tn,"-$&").toLowerCase():c===null&&(c=void 0),u==="oninput"&&o[l=u]&&(l="oninputCapture"),o[l]=c}}r=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=U(n.children).forEach(function(d){d.props.selected=o.value.indexOf(d.props.value)!=-1})),r=="select"&&o.defaultValue!=null&&(o.value=U(n.children).forEach(function(d){d.props.selected=o.multiple?o.defaultValue.indexOf(d.props.value)!=-1:o.defaultValue==d.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",un)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),t.props=o}(e),e.$$typeof=St,Ze&&Ze(e)};var Xe=v.__r;v.__r=function(e){Xe&&Xe(e),Be=e.__c};var Qe=v.diffed;v.diffed=function(e){Qe&&Qe(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),Be=null};var dn={ReactCurrentDispatcher:{current:{readContext:function(e){return Be.__n[e.__c].props.value},useCallback:ne,useContext:ht,useDebugValue:ft,useDeferredValue:kt,useEffect:P,useId:gt,useImperativeHandle:mt,useInsertionEffect:Ct,useLayoutEffect:ae,useMemo:he,useReducer:Ie,useRef:me,useState:N,useSyncExternalStore:Mt,useTransition:xt}}};function _n(e){return j.bind(null,e)}function fe(e){return!!e&&e.$$typeof===St}function pn(e){return fe(e)&&e.type===O}function mn(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function hn(e){return fe(e)?$t.apply(null,arguments):e}function fn(e){return!!e.__k&&(Z(null,e),!0)}function gn(e){return e&&(e.base||e.nodeType===1&&e)||null}var bn=function(e,t){return e(t)},vn=function(e,t){return e(t)},yn=O;function Nt(e){e()}function kt(e){return e}function xt(){return[!1,Nt]}var Ct=ae,wn=fe;function Mt(e,t){var n=t(),r=N({h:{__:n,v:t}}),o=r[0].h,i=r[1];return ae(function(){o.__=n,o.v=t,ye(o)&&i({h:o})},[e,n,t]),P(function(){return ye(o)&&i({h:o}),e(function(){ye(o)&&i({h:o})})},[e]),n}function ye(e){var t,n,r=e.v,o=e.__;try{var i=r();return!((t=o)===(n=i)&&(t!==0||1/t==1/n)||t!=t&&n!=n)}catch{return!0}}var q={useState:N,useId:gt,useReducer:Ie,useEffect:P,useLayoutEffect:ae,useInsertionEffect:Ct,useTransition:xt,useDeferredValue:kt,useSyncExternalStore:Mt,startTransition:Nt,useRef:me,useImperativeHandle:mt,useMemo:he,useCallback:ne,useContext:ht,useDebugValue:ft,version:"18.3.1",Children:Kt,render:on,hydrate:an,unmountComponentAtNode:fn,createPortal:Xt,createElement:j,createContext:Ht,createFactory:_n,cloneElement:hn,createRef:Bt,Fragment:O,isValidElement:fe,isElement:wn,isFragment:pn,isMemo:mn,findDOMNode:gn,Component:F,PureComponent:Ee,memo:zt,forwardRef:Gt,flushSync:vn,unstable_batchedUpdates:bn,StrictMode:yn,Suspense:ce,SuspenseList:ee,lazy:Jt,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:dn},Et={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},et=q.createContext&&q.createContext(Et),Sn=["attr","size","title"];function Nn(e,t){if(e==null)return{};var n=kn(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kn(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tt(Object(n),!0).forEach(function(r){xn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xn(e,t,n){return t=Cn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cn(e){var t=Mn(e,"string");return typeof t=="symbol"?t:t+""}function Mn(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pt(e){return e&&e.map((t,n)=>q.createElement(t.tag,_e({key:n},t.attr),Pt(t.child)))}function A(e){return t=>q.createElement(En,de({attr:_e({},e.attr)},t),Pt(e.child))}function En(e){var t=n=>{var{attr:r,size:o,title:i}=e,l=Nn(e,Sn),c=o||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),q.createElement("svg",de({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,l,{className:u,style:_e(_e({color:e.color||n.color},n.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&q.createElement("title",null,i),e.children)};return et!==void 0?q.createElement(et.Consumer,null,n=>t(n)):t(Et)}function Pn(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"m6 17 5-5-5-5"},child:[]},{tag:"path",attr:{d:"m13 17 5-5-5-5"},child:[]}]})(e)}function Tn(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"20",height:"14",x:"2",y:"3",rx:"2"},child:[]},{tag:"line",attr:{x1:"8",x2:"16",y1:"21",y2:"21"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"17",y2:"21"},child:[]}]})(e)}function Wn(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{width:"4",height:"16",x:"6",y:"4"},child:[]},{tag:"rect",attr:{width:"4",height:"16",x:"14",y:"4"},child:[]}]})(e)}function Tt(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}function Wt(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",x2:"12",y1:"3",y2:"15"},child:[]}]})(e)}function In(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(e)}function On(e){return A({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(e)}var T=(e=>(e.Natural="natural",e.Horizontal="horizontal",e.HorizontalSwap="horizontal-swap",e.TopOnly="top-only",e.BottomOnly="bottom-only",e.TopEmphasis="top-emphasis",e.BottomEmphasis="bottom-emphasis",e.SingleScreen="single-screen",e))(T||{});const we={layout:"natural",screenGap:0,swapScreens:!1,integerScale:!1,screenFilter:!0,singleScreenToggleKey:"Tab",currentSingleScreen:"top",theme:"cupcake"};function ge(){const e=window.localStorage.getItem("displaySettings");if(e)try{return{...we,...JSON.parse(e)}}catch{return we}return we}function It(e){window.localStorage.setItem("displaySettings",JSON.stringify(e)),document.documentElement.setAttribute("data-theme",e.theme),window.dispatchEvent(new CustomEvent("displaySettingsChanged",{detail:e}))}function Bn(){const e=ge();(e.layout==="single-screen"||e.layout==="top-only"||e.layout==="bottom-only")&&(e.currentSingleScreen=e.currentSingleScreen==="top"?"bottom":"top",It(e))}function Dn(){const[e,t]=N(ge()),[n,r]=N(!1),o=g=>{const k={...e,...g};t(k),It(k)},i=g=>{const k=g.currentTarget.value;o(k==="single-screen"?{layout:k,currentSingleScreen:"top"}:{layout:k})},l=g=>{o({screenGap:parseInt(g.currentTarget.value)||0})},c=g=>{o({swapScreens:g.currentTarget.checked})},u=g=>{o({integerScale:g.currentTarget.checked})},d=g=>{o({screenFilter:g.currentTarget.checked})},m=g=>{o({theme:g.currentTarget.value})},s=()=>{r(!0)};P(()=>{if(!n)return;const g=k=>{k.preventDefault(),k.stopPropagation(),o({singleScreenToggleKey:k.key}),r(!1)};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[n,e]);const p=e.layout==="single-screen"||e.layout==="top-only"||e.layout==="bottom-only",f=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter","dim","nord","sunset"];return a("div",{className:"display-settings-container",children:[a("h4",{className:"settings-section-title",children:"Interface Theme"}),a("div",{className:"form-control",children:[a("label",{className:"label",children:a("span",{className:"label-text",children:"UI Theme"})}),a("select",{className:"select select-bordered w-full",value:e.theme,onChange:m,children:f.map(g=>a("option",{value:g,children:g.charAt(0).toUpperCase()+g.slice(1)},g))}),a("label",{className:"label",children:a("span",{className:"label-text-alt",children:"Choose a color theme for the emulator interface."})})]}),a("div",{className:"divider"}),a("h4",{className:"settings-section-title",children:"Screen Layout"}),a("div",{className:"form-control",children:[a("label",{className:"label",children:a("span",{className:"label-text",children:"Layout Style"})}),a("select",{className:"select select-bordered w-full",value:e.layout,onChange:i,children:[a("option",{value:"natural",children:"Natural (Vertical)"}),a("option",{value:"horizontal",children:"Side by Side"}),a("option",{value:"horizontal-swap",children:"Side by Side (Reversed)"}),a("option",{value:"top-emphasis",children:"Top Emphasis (Large Top, Small Bottom)"}),a("option",{value:"bottom-emphasis",children:"Bottom Emphasis (Large Bottom, Small Top)"}),a("option",{value:"single-screen",children:"Single Screen (Toggleable)"}),a("option",{value:"top-only",children:"Top Screen Only (Fixed)"}),a("option",{value:"bottom-only",children:"Bottom Screen Only (Fixed)"})]}),a("label",{className:"label",children:a("span",{className:"label-text-alt",children:"Choose how the DS screens are arranged on your display."})})]}),p&&a("div",{className:"form-control",children:[a("label",{className:"label",children:a("span",{className:"label-text",children:"Screen Toggle Key"})}),a("div",{className:"keybind-container",children:[a("button",{className:`btn ${n?"btn-primary":"btn-outline"} keybind-button`,onClick:s,children:n?"Press any key...":e.singleScreenToggleKey}),a("span",{className:"keybind-hint",children:"Press to toggle between Top and Bottom screen"})]}),a("label",{className:"label",children:a("span",{className:"label-text-alt",children:["Currently showing: ",a("strong",{children:e.currentSingleScreen==="top"?"Top Screen":"Bottom Screen"})]})})]}),a("div",{className:"form-control",children:[a("label",{className:"label",children:a("span",{className:"label-text",children:["Screen Gap: ",e.screenGap,"px"]})}),a("input",{type:"range",min:"0",max:"100",value:e.screenGap,onChange:l,className:"range range-primary"}),a("label",{className:"label",children:a("span",{className:"label-text-alt",children:"Adjust the gap between the two screens (simulates DS hinge)."})})]}),a("div",{className:"divider"}),a("h4",{className:"settings-section-title",children:"Screen Options"}),a("div",{className:"form-control",children:a("label",{className:"label cursor-pointer justify-start gap-4",children:[a("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:e.swapScreens,onChange:c}),a("div",{children:[a("span",{className:"label-text",children:"Swap Screens"}),a("p",{className:"label-text-alt",children:"Swap the positions of the top and bottom screens."})]})]})}),a("div",{className:"form-control",children:a("label",{className:"label cursor-pointer justify-start gap-4",children:[a("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:e.screenFilter,onChange:d}),a("div",{children:[a("span",{className:"label-text",children:"Smooth Scaling (Bilinear Filter)"}),a("p",{className:"label-text-alt",children:"Apply smoothing when scaling screens. Disable for sharp pixels."})]})]})}),a("div",{className:"form-control",children:a("label",{className:"label cursor-pointer justify-start gap-4",children:[a("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:e.integerScale,onChange:u}),a("div",{children:[a("span",{className:"label-text",children:"Integer Scaling"}),a("p",{className:"label-text-alt",children:"Scale screens by whole numbers only (1x, 2x, 3x) for pixel-perfect display."})]})]})}),a("div",{className:"divider"}),a("div",{className:"layout-preview",children:[a("h4",{className:"settings-section-title",children:"Preview"}),a("div",{className:`preview-container preview-${e.layout} ${e.swapScreens?"preview-swapped":""} ${e.layout==="single-screen"?`preview-single-${e.currentSingleScreen}`:""}`,children:[a("div",{className:"preview-screen preview-top",style:{marginBottom:e.layout==="natural"?`${e.screenGap/4}px`:"0"},children:a("span",{children:"Top"})}),a("div",{className:"preview-screen preview-bottom",style:{marginLeft:e.layout==="horizontal"||e.layout==="horizontal-swap"?`${e.screenGap/4}px`:"0"},children:a("span",{children:"Bottom"})})]})]})]})}function Ln({onOpenSettings:e,stopEmulating:t}){const[n,r]=N("Nintendo DS"),[o,i]=N(""),[l,c]=N(!1),[u,d]=N(!1),[m,s]=N(!1),[p,f]=N(ge()),[g,k]=N(!0),x=me(null),b=()=>{t()},w=()=>{k(!0),x.current&&clearTimeout(x.current),x.current=window.setTimeout(()=>{u||k(!1)},3e3)};P(()=>{const S=()=>{w()},W=()=>{u||k(!1)};return window.addEventListener("mousemove",S),document.addEventListener("mouseleave",W),w(),()=>{window.removeEventListener("mousemove",S),document.removeEventListener("mouseleave",W),x.current&&clearTimeout(x.current)}},[u]);const B=()=>{u||(d(!0),k(!0),window.WebMelon.emulator.pause())},I=()=>{u&&(d(!1),window.WebMelon.emulator.resume(),w())},R=()=>{m||u||(s(!0),window.WebMelon.emulator.setEmulatorSpeed(2))},D=()=>{!m||u||(s(!1),window.WebMelon.emulator.setEmulatorSpeed(1))},z=()=>{B(),e()},$=()=>{window.WebMelon.emulator.shutdown()};P(()=>{const S=W=>{f(W.detail)};return window.addEventListener("displaySettingsChanged",S),()=>{window.removeEventListener("displaySettingsChanged",S)}},[]),P(()=>{const S=W=>{W.target instanceof HTMLInputElement||W.target instanceof HTMLTextAreaElement||W.target instanceof HTMLSelectElement||W.key===p.singleScreenToggleKey&&(p.layout===T.SingleScreen||p.layout===T.TopOnly||p.layout===T.BottomOnly)&&(W.preventDefault(),Bn())};return window.addEventListener("keydown",S),()=>{window.removeEventListener("keydown",S)}},[p.singleScreenToggleKey,p.layout]),P(()=>{if(document.getElementById("top-screen")&&!l)if(c(!0),window.WebMelon.emulator.startEmulation("top-screen","bottom-screen"),window.WebMelon.emulator.addShutdownListener(b),window.WebMelon.firmware.getFirmwareSettings().shouldFirmwareBoot)r("Main Menu"),i("Firmware Boot");else{const S=window.WebMelon.emulator.getGameTitle();if(S){const W=S.split(`
`);r(W[0]),W.length>1&&i(W[1])}}},[l]);const G=()=>{const S=["emulator-container"];return p.layout===T.SingleScreen?p.currentSingleScreen==="top"?S.push("layout-top-only"):S.push("layout-bottom-only"):S.push(`layout-${p.layout}`),p.swapScreens&&S.push("screens-swapped"),p.screenFilter||S.push("no-filter"),p.integerScale&&S.push("integer-scale"),S.join(" ")},_=()=>p.layout===T.BottomOnly?!0:p.layout===T.SingleScreen?p.currentSingleScreen!=="top":!1,h=()=>p.layout===T.TopOnly?!0:p.layout===T.SingleScreen?p.currentSingleScreen!=="bottom":!1,y=()=>({gap:`${p.screenGap}px`}),E=()=>{const S=["emulator-screen"];return p.layout===T.TopEmphasis?S.push("screen-large"):p.layout===T.BottomEmphasis&&S.push("screen-small"),_()&&S.push("screen-hidden"),S.join(" ")},L=()=>{const S=["emulator-screen"];return p.layout===T.BottomEmphasis?S.push("screen-large"):p.layout===T.TopEmphasis&&S.push("screen-small"),h()&&S.push("screen-hidden"),S.join(" ")},J=p.layout===T.SingleScreen||p.layout===T.TopOnly||p.layout===T.BottomOnly,be=p.currentSingleScreen==="top"?"Top":"Bottom";return a("div",{className:"emulator-wrapper",children:[a("div",{className:`emulator-header ${g?"visible":""}`,children:[a("div",{className:"game-title-text-container",children:a("span",{className:"game-title-text",children:[a("b",{children:n}),o&&` (${o})`,J&&a("span",{className:"screen-indicator",children:[" â€” ",be," [",p.singleScreenToggleKey,"]"]})]})}),a("div",{className:"emulator-controls-section",children:[a("div",{className:"tooltip","data-tip":"Stop",children:a("button",{className:"btn btn-square btn-sm",onClick:$,children:a(On,{size:"1.2em"})})}),a("div",{className:"tooltip","data-tip":"Settings",children:a("button",{className:"btn btn-square btn-sm",onClick:z,children:a(Tt,{size:"1.2em"})})}),a("div",{className:"tooltip","data-tip":u?"Resume":"Pause",children:a("button",{className:u?"btn btn-square btn-sm btn-primary":"btn btn-square btn-sm",onClick:u?I:B,children:a(Wn,{size:"1.2em"})})}),a("div",{className:"tooltip","data-tip":m?"Normal Speed":"Fast Forward",children:a("button",{className:m?"btn btn-square btn-sm btn-primary":"btn btn-square btn-sm",onClick:m?D:R,children:a(Pn,{size:"1.2em"})})})]})]}),a("div",{className:G(),style:y(),children:[a("canvas",{className:E(),id:"top-screen",height:"192",width:"256"}),a("canvas",{className:L(),id:"bottom-screen",height:"192",width:"256"})]})]})}function Fn({onStartEmulating:e,onOpenSettings:t}){const[n,r]=N(null),[o,i]=N(null),[l,c]=N(!1),[u,d]=N(!1),[m,s]=N(!1),p=b=>{let w=b.target;!w.files||w.files.length===0||(i(w.files[0]),r(w.files[0].name))},f=b=>{var w;b.preventDefault(),(w=b.dataTransfer)!=null&&w.files.length&&(i(b.dataTransfer.files[0]),r(b.dataTransfer.files[0].name))},g=ne(async()=>{if(console.log("starting prepare handler"),u){if(o){let b=window.WebMelon.cart.getUnloadedCartCode();console.log("Firmware boot with cart:",b),window.WebMelon.emulator.setSavePath("/savefiles/"+b+".sav"),window.WebMelon.emulator.loadCart()}window.WebMelon.emulator.loadUserBIOS()}else{let b=window.WebMelon.cart.getUnloadedCartCode();console.log(b),window.WebMelon.emulator.setSavePath("/savefiles/"+b+".sav"),window.WebMelon.emulator.loadFreeBIOS(),window.WebMelon.emulator.loadCart()}c(!1),e()},[u,o]),k=ne(async()=>{if(!window.WebMelon||!o||l)return;c(!0);const b=new Uint8Array(await o.arrayBuffer());if(window.WebMelon.cart.createCart(),window.WebMelon.storage.createDirectory("/roms"),window.WebMelon.storage.write("/roms/game.nds",b),window.WebMelon.emulator.createEmulator(),!window.WebMelon.cart.loadFileIntoCart("/roms/game.nds")){c(!1);return}window.WebMelon.storage.onPrepare(g),window.WebMelon.storage.prepareVirtualFilesystem()},[o,l]),x=ne(async()=>{if(!(!window.WebMelon||l)){if(c(!0),o){const b=new Uint8Array(await o.arrayBuffer());if(window.WebMelon.cart.createCart(),window.WebMelon.storage.createDirectory("/roms"),window.WebMelon.storage.write("/roms/game.nds",b),window.WebMelon.emulator.createEmulator(),!window.WebMelon.cart.loadFileIntoCart("/roms/game.nds")){c(!1);return}}else window.WebMelon.emulator.createEmulator();d(!0)}},[l,m,u,o]);return P(()=>{u&&(window.WebMelon.storage.onPrepare(g),window.WebMelon.storage.prepareVirtualFilesystem())},[u]),P(()=>{window.WebMelon.firmware.canFirmwareBoot(),setTimeout(()=>{s(window.WebMelon.firmware.canFirmwareBoot())},500)},[]),a("div",{className:"entrypoint-container",children:[a("label",{for:"rom-file-input",onDrop:f,onDragOver:b=>b.preventDefault(),children:a("div",{className:"rom-input-container",children:[a(Wt,{size:36}),a("p",{className:"rom-input-title",children:a("b",{children:"Insert ROM file"})}),a("p",{className:"rom-input-subtitle",children:"Drag and drop or click to browse"}),n?a("p",{className:"rom-input-selected",children:n}):""]})}),a("input",{type:"file",id:"rom-file-input",onChange:p,accept:".nds"}),a("div",{className:"button-group",children:[a("button",{class:"btn btn-primary play-button",disabled:o===null||l,onClick:k,children:[l?a("span",{className:"loading loading-spinner loading-xs"}):""," Play"]}),m?a("button",{class:"btn btn-secondary play-button",disabled:l,onClick:x,children:[l?a("span",{className:"loading loading-spinner loading-xs"}):""," Firmware Boot",o&&a("span",{className:"text-xs ml-1",children:"(with game)"})]}):null,a("button",{class:"btn btn-outline settings-button",onClick:t,children:[a(Tt,{size:18})," Settings"]})]})]})}function An(e){return A({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeMiterlimit:"10",strokeWidth:"32",d:"M467.51 248.83c-18.4-83.18-45.69-136.24-89.43-149.17A91.5 91.5 0 0 0 352 96c-26.89 0-48.11 16-96 16s-69.15-16-96-16a99.09 99.09 0 0 0-27.2 3.66C89 112.59 61.94 165.7 43.33 248.83c-19 84.91-15.56 152 21.58 164.88 26 9 49.25-9.61 71.27-37 25-31.2 55.79-40.8 119.82-40.8s93.62 9.6 118.66 40.8c22 27.41 46.11 45.79 71.42 37.16 41.02-14.01 40.44-79.13 21.43-165.04z"},child:[]},{tag:"circle",attr:{cx:"292",cy:"224",r:"20"},child:[]},{tag:"path",attr:{d:"M336 288a20 20 0 1 1 20-19.95A20 20 0 0 1 336 288z"},child:[]},{tag:"circle",attr:{cx:"336",cy:"180",r:"20"},child:[]},{tag:"circle",attr:{cx:"380",cy:"224",r:"20"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M160 176v96m48-48h-96"},child:[]}]})(e)}function $n(e){return A({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"352",height:"352",x:"80",y:"80",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"48",ry:"48"},child:[]},{tag:"rect",attr:{width:"224",height:"224",x:"144",y:"144",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"16",ry:"16"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 80V48m80 32V48M176 80V48m80 416v-32m80 32v-32m-160 32v-32m256-176h32m-32 80h32m-32-160h32M48 256h32m-32 80h32M48 176h32"},child:[]}]})(e)}function Hn(e){return A({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm8 336c0 4.411-3.589 8-8 8H48c-4.411 0-8-3.589-8-8V112c0-4.411 3.589-8 8-8h480c4.411 0 8 3.589 8 8v288zM170 270v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm-336 82v-28c0-6.627-5.373-12-12-12H82c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm384 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zM122 188v-28c0-6.627-5.373-12-12-12H82c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm96 0v-28c0-6.627-5.373-12-12-12h-28c-6.627 0-12 5.373-12 12v28c0 6.627 5.373 12 12 12h28c6.627 0 12-5.373 12-12zm-98 158v-16c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v16c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"},child:[]}]})(e)}function Un(){const[e,t]=N(50),[n,r]=N(50);return P(()=>{const l=window.WebMelon.input.getInputSettings();t(l.gamepadAxisSensitivity*100),r(l.gamepadRumbleIntensity*100)}),a("div",{className:"input-container",children:[a("div",{class:"label",children:a("span",{class:"label-text",children:"Controller Axis Sensitivity"})}),a("input",{type:"range",min:0,max:100,step:1,value:e,onChange:l=>{const c=parseInt(l.currentTarget.value);let u=window.WebMelon.input.getInputSettings();u.gamepadAxisSensitivity=c/100,window.WebMelon.input.setInputSettings(u)},className:"range"}),a("div",{class:"label",children:a("span",{class:"label-text-alt",children:"Setting this higher will make controller axes trigger less easily. If this is set too low, you may not be able to select two buttons at the same time (such as using the top left corner to select D-Pad Left and D-Pad Up simultaneously)."})}),a("div",{class:"label",children:a("span",{class:"label-text",children:"Rumble Pak Intensity"})}),a("input",{type:"range",min:0,max:100,step:1,value:n,onChange:l=>{const c=parseInt(l.currentTarget.value);let u=window.WebMelon.input.getInputSettings();u.gamepadRumbleIntensity=c/100,window.WebMelon.input.setInputSettings(u)},className:"range"}),a("div",{class:"label",children:a("span",{class:"label-text-alt",children:"Determine how much the controller should vibrate in games that support the Nintendo DS Rumble Pak."})})]})}function jn(){const[e,t]=N("keyboard"),[n,r]=N([]),[o,i]=N(!1),[l,c]=N(!1),[u,d]=N(0),[m,s]=N(!1),[p,f]=N(!0),[g,k]=N(.5),[x,b]=N(.5);P(()=>{const _=()=>{const y=navigator.getGamepads();s(y.some(E=>E!==null))};_();const h=setInterval(_,1e3);return window.addEventListener("gamepadconnected",_),window.addEventListener("gamepaddisconnected",_),()=>{clearInterval(h),window.removeEventListener("gamepadconnected",_),window.removeEventListener("gamepaddisconnected",_)}},[]);const w=()=>{const _=window.WebMelon.input.getInputSettings();if(f(_.rumbleEnabled??!0),k(_.gamepadRumbleIntensity??.5),b(_.gamepadAxisSensitivity??.5),e==="keyboard"){let h=[];for(const y in window.WebMelon.constants.DS_INPUT_MAP){let E=window.WebMelon.constants.DS_INPUT_MAP[y],L=Object.keys(_.keybinds).filter(S=>_.keybinds[S]===E);const J=L.filter(S=>!_.alternateKeybinds.includes(S))[0]??null,be=L.filter(S=>_.alternateKeybinds.includes(S))[0]??null;h.push({keyPrimary:J,keyAlternate:be,gamepadButtons:[],name:window.WebMelon.constants.DS_BUTTON_NAME_MAP[y],bitfield:E,buttonKey:y})}r(h)}else{let h=[];for(const y in window.WebMelon.constants.DS_INPUT_MAP){let E=window.WebMelon.constants.DS_INPUT_MAP[y],L=_.gamepadBinds[y]||[];h.push({keyPrimary:null,keyAlternate:null,gamepadButtons:L,name:window.WebMelon.constants.DS_BUTTON_NAME_MAP[y],bitfield:E,buttonKey:y})}r(h)}},B=()=>{let _={},h=[];for(const E of n)E.keyPrimary&&(_[E.keyPrimary]=E.bitfield),E.keyAlternate&&(_[E.keyAlternate]=E.bitfield,h.push(E.keyAlternate));let y=window.WebMelon.input.getInputSettings();y.keybinds=_,y.alternateKeybinds=h,window.WebMelon.input.setInputSettings(y)},I=()=>{let _={};for(const y of n)_[y.buttonKey]=y.gamepadButtons;let h=window.WebMelon.input.getInputSettings();h.gamepadBinds=_,window.WebMelon.input.setInputSettings(h)},R=()=>{let _=window.WebMelon.input.getInputSettings();_.rumbleEnabled=p,_.gamepadRumbleIntensity=g,_.gamepadAxisSensitivity=x,window.WebMelon.input.setInputSettings(_)},D=(_,h)=>{d(_),c(h),i(!0)},z=(_,h)=>{let y=[...n];e==="keyboard"?(h?y[_].keyAlternate=null:y[_].keyPrimary=null,r(y),B()):(y[_].gamepadButtons=[],r(y),I()),i(!1)},$=_=>{let h=[...n];for(const y in h)h[y].keyPrimary===_.key&&(h[y].keyPrimary=null),h[y].keyAlternate===_.key&&(h[y].keyAlternate=null),y===u.toString()&&(l?h[y].keyAlternate=_.key:h[y].keyPrimary=_.key);r(h),B(),i(!1)};P(()=>{if(!o||e!=="controller")return;let _;const h=()=>{const E=navigator.getGamepads()[0];if(E){for(let L=0;L<E.buttons.length;L++)if(E.buttons[L].pressed){let J=[...n];J[u].gamepadButtons=[L],r(J),I(),i(!1);return}}_=requestAnimationFrame(h)};return _=requestAnimationFrame(h),()=>{_&&cancelAnimationFrame(_)}},[o,e,u,n]),P(()=>{if(o&&e==="keyboard")return window.addEventListener("keydown",$),()=>{window.removeEventListener("keydown",$)}},[o,e]),P(()=>{i(!1),w()},[e]),P(()=>{R()},[p,g,x]);const G=()=>{const _=window.WebMelon.constants;let h=window.WebMelon.input.getInputSettings();e==="keyboard"?(h.keybinds=_.DEFAULT_KEYBOARD_BINDINGS,h.alternateKeybinds=[]):h.gamepadBinds=_.DEFAULT_GAMEPAD_BINDINGS,window.WebMelon.input.setInputSettings(h),w()};return a("div",{className:"controls-container",children:[a("div",{className:"controls-input-mode-selector",children:a("div",{className:"join",children:[a("input",{className:"join-item btn",type:"radio",name:"options","aria-label":"Keyboard",checked:e==="keyboard",onClick:()=>t("keyboard")}),a("input",{className:"join-item btn",type:"radio",name:"options","aria-label":"Controller",checked:e==="controller",onClick:()=>t("controller")})]})}),e==="controller"&&!m&&a("div",{className:"alert alert-warning mb-4",children:a("span",{children:"No gamepad detected. Please connect a controller."})}),a("div",{className:"controls-list",children:n.length===0?a("span",{children:"Loading controls..."}):e==="keyboard"?n.map((_,h)=>a("div",{className:"controls-control",children:[a("div",{className:"controls-ctrl-name",children:a("span",{className:"controls-ctrl-name-text",children:_.name})}),a("div",{className:o&&u===h&&!l?"controls-ctrl-primary controls-ctrl-active":"controls-ctrl-primary",onClick:()=>D(h,!1),onContextMenu:y=>{y.preventDefault(),z(h,!1)},children:a("span",{children:_.keyPrimary?a("kbd",{className:"kbd kbd-sm",children:_.keyPrimary.toUpperCase()}):a("span",{className:o&&u===h&&!l?"unbound-text-active":"unbound-text",children:o&&u===h&&!l?"press key":"click to bind..."})})}),a("div",{className:o&&u===h&&l?"controls-ctrl-alternate controls-ctrl-active":"controls-ctrl-alternate",onClick:()=>D(h,!0),onContextMenu:y=>{y.preventDefault(),z(h,!0)},children:a("span",{children:_.keyAlternate?a("kbd",{className:"kbd kbd-sm",children:_.keyAlternate.toUpperCase()}):a("span",{className:o&&u===h&&l?"unbound-text-active":"unbound-text",children:o&&u===h&&l?"press key":"click to bind..."})})})]},h)):n.map((_,h)=>a("div",{className:"controls-control",children:[a("div",{className:"controls-ctrl-name",children:a("span",{className:"controls-ctrl-name-text",children:_.name})}),a("div",{className:o&&u===h?"controls-ctrl-primary controls-ctrl-active":"controls-ctrl-primary",onClick:()=>D(h,!1),onContextMenu:y=>{y.preventDefault(),z(h,!1)},style:{flexBasis:"250px"},children:a("span",{children:_.gamepadButtons.length>0?a("kbd",{className:"kbd kbd-sm",children:["Button ",_.gamepadButtons.join(", ")]}):a("span",{className:o&&u===h?"unbound-text-active":"unbound-text",children:o&&u===h?"press button...":"click to bind..."})})})]},h))}),e==="controller"&&a(O,{children:[a("div",{className:"divider"}),a("h4",{className:"text-lg font-semibold mb-2",children:"Gamepad Settings"}),a("div",{className:"form-control mb-4",children:[a("label",{className:"label",children:a("span",{className:"label-text",children:["Analog Stick Sensitivity: ",Math.round(x*100),"%"]})}),a("input",{type:"range",min:"0",max:"100",value:x*100,onChange:_=>b(parseInt(_.currentTarget.value)/100),className:"range range-primary"})]}),a("div",{className:"form-control mb-4",children:a("label",{className:"label cursor-pointer justify-start gap-4",children:[a("input",{type:"checkbox",className:"checkbox checkbox-primary",checked:p,onChange:_=>f(_.currentTarget.checked)}),a("div",{children:[a("span",{className:"label-text",children:"Enable Rumble"}),a("p",{className:"label-text-alt",children:"Enable controller vibration for compatible games."})]})]})}),p&&a("div",{className:"form-control mb-4",children:[a("label",{className:"label",children:a("span",{className:"label-text",children:["Rumble Intensity: ",Math.round(g*100),"%"]})}),a("input",{type:"range",min:"0",max:"100",value:g*100,onChange:_=>k(parseInt(_.currentTarget.value)/100),className:"range range-primary"})]})]}),a("div",{className:"divider"}),a("button",{className:"btn btn-warning w-full",onClick:G,children:["Reset ",e==="keyboard"?"Keyboard":"Gamepad"," to Defaults"]})]})}function Rn(){const[e,t]=N(window.WebMelon.firmware.getFirmwareSettings()),n=l=>{let c=Object.assign({},e);c.language=parseInt(l.currentTarget.value),t(window.WebMelon.firmware.setFirmwareSettings(c))},r=l=>{const c=parseInt(l.currentTarget.value);let u=Object.assign({},e);u.birthdayMonth=c;let d=new Date(2008,c,0).getDate();u.birthdayDay>d&&(u.birthdayDay=1),t(window.WebMelon.firmware.setFirmwareSettings(u))},o=l=>{const c=parseInt(l.currentTarget.value);let u=Object.assign({},e);u.birthdayDay=c,t(window.WebMelon.firmware.setFirmwareSettings(u))},i=l=>{let c=Object.assign({},e);c.nickname=l.currentTarget.value,t(window.WebMelon.firmware.setFirmwareSettings(c))};return a("div",{className:"personalization-container",children:[a("div",{className:"label",children:a("span",{class:"label-text",children:"Name"})}),a("input",{type:"text",placeholder:"Name",maxlength:10,value:e.nickname,onChange:i,className:"input input-bordered w-full"}),a("div",{className:"label",children:a("span",{class:"label-text-alt",children:"This name will be shown in games and menus inside the emulator. Max length: 10 characters."})}),a("div",{className:"label",children:a("span",{class:"label-text",children:"Birthday (MM/DD)"})}),a("div",{className:"birthday-selection",children:[a("div",{className:"birthday-selector",children:a("select",{className:"select select-bordered w-full max-w-xs",onChange:r,children:Array.from({length:12},(l,c)=>c+1).map(l=>a("option",{selected:l===e.birthdayMonth,children:l},l))})}),a("div",{className:"birthday-selector",children:a("select",{className:"select select-bordered w-full max-w-xs",onChange:o,children:Array.from({length:new Date(2008,e.birthdayMonth,0).getDate()},(l,c)=>c+1).map(l=>a("option",{selected:l===e.birthdayDay,children:l},l))})})]}),a("div",{className:"label",children:a("span",{class:"label-text-alt",children:"Some games may add easter eggs on this day. This doesn't have to be your real birthday."})}),a("div",{className:"label",children:a("span",{class:"label-text",children:"Language"})}),a("div",{className:"birthday-selection",children:a("div",{className:"birthday-selector",children:a("select",{className:"select select-bordered w-full max-w-xs",onChange:n,children:window.WebMelon.constants.FIRMWARE_LANGUAGES.map(l=>a("option",{selected:e.language===l.id,value:l.id,children:l.name},l.id))})})}),a("div",{className:"label",children:a("span",{class:"label-text-alt",children:"This language will be used as the firmware language and may be used by the games in the emulator as well."})})]})}function zn(){const[e,t]=N(!1),[n,r]=N(!1),[o,i]=N(!1),l=async m=>{const s=["bios7.bin","bios9.bin","firmware.bin"];for(const p of m){if(!s.includes(p.name))return;window.WebMelon.firmware.uploadBiosFile(p.name,new Uint8Array(await p.arrayBuffer()))}c(),window.WebMelon.storage.sync()},c=()=>{const m=window.WebMelon.firmware.getActiveBiosFiles();t(m.hasBios7),r(m.hasBios9),i(m.hasFirmware)},u=m=>{let s=m.target;!s.files||s.files.length===0||l(s.files)},d=m=>{var s;m.preventDefault(),(s=m.dataTransfer)!=null&&s.files.length&&l(m.dataTransfer.files)};return P(()=>{c()},[]),a("div",{className:"firmware-container",children:[a("label",{for:"firmware-file-input",onDrop:d,onDragOver:m=>m.preventDefault(),children:a("div",{className:"firmware-input-container",children:[a(Wt,{size:30}),a("p",{children:a("b",{children:"Add BIOS files"})}),a("p",{children:"Accepts: bios7.bin, bios9.bin, firmware.bin"})]})}),a("input",{type:"file",id:"firmware-file-input",onChange:u}),a("br",{}),a("ul",{children:[a("li",{children:["bios7.bin: ",a("b",{children:e?"Provided":"Missing"})]}),a("li",{children:["bios9.bin: ",a("b",{children:n?"Provided":"Missing"})]}),a("li",{children:["firmware.bin: ",a("b",{children:o?"Provided":"Missing"})]})]})]})}const le={display:{displayName:"Display",icon:a(Tn,{}),component:Dn},controls:{displayName:"Controls",icon:a(Hn,{}),component:jn},personalization:{displayName:"Personalization",icon:a(In,{}),component:Rn},input:{displayName:"Controller Input",icon:a(An,{}),component:Un},firmware:{displayName:"Firmware",icon:a($n,{}),component:zn}};function Vn({showing:e,onClose:t}){const n=me(null),[r,o]=N("display"),i=()=>{window.localStorage.setItem("inputSettings",JSON.stringify(window.WebMelon.input.getInputSettings())),window.localStorage.setItem("firmwareSettings",JSON.stringify(window.WebMelon.firmware.getFirmwareSettings())),t()};P(()=>{if(!n.current||!window.WebMelon)return;if(!e){n.current.close();return}const c=u=>{u.key==="Escape"&&e&&i()};return window.addEventListener("keydown",c),n.current.showModal(),()=>{window.removeEventListener("keydown",c)}},[e]),P(()=>{if(!window.WebMelon){console.error("WebMelon not loaded");return}const c=window.localStorage.getItem("inputSettings"),u=window.localStorage.getItem("firmwareSettings");if(c){const d=JSON.parse(c);window.WebMelon.input.setInputSettings(d)}if(u){const d=JSON.parse(u);window.WebMelon.firmware.setFirmwareSettings(d)}},[]);const l=le[r].component;return a("dialog",{ref:n,id:"settings-modal",className:"modal",children:a("form",{method:"dialog",className:"modal-box w-11/12 max-w-5xl",children:[a("h3",{className:"font-bold text-lg",children:"Settings"}),a("div",{className:"settings-box-container",children:[a("ul",{className:"menu bg-base-200 rounded-box settings-menu",children:Object.keys(le).map(c=>a("li",{children:a("a",{className:r===c?"active":"",onClick:()=>o(c),children:[le[c].icon," ",le[c].displayName]})},c))}),a("div",{className:"settings-item",children:e?a(l,{}):null})]}),a("div",{className:"modal-action",children:a("button",{className:"btn",onClick:i,children:"Close"})})]})})}function Gn(){const[e,t]=N(!1),[n,r]=N(!1),o=async()=>{t(!0)},i=async()=>{t(!1)},l=()=>{r(!0)};return a(O,{children:[a("div",{className:"demo-page-container place-content-center",children:e?a(Ln,{onOpenSettings:l,stopEmulating:i}):a(Fn,{onStartEmulating:o,onOpenSettings:l})}),a(Vn,{showing:n,onClose:()=>{r(!1)}})]})}function Kn(){return a(O,{children:a("div",{children:a(Gn,{})})})}const qn=ge();document.documentElement.setAttribute("data-theme",qn.theme);Z(a(Kn,{}),document.getElementById("app"));
